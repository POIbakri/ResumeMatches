const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-Dwhluaoo.js","assets/vendor-15hnMuUL.js"])))=>i.map(i=>d[i]);
import{r as p,a as kl,L as te,g as Sl,c as ve,u as ai,R as ii,b as st,N as zt,d as Nl,B as El}from"./vendor-15hnMuUL.js";import{a as hs}from"./analytics-Dy164akG.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var oi={exports:{}},wr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=p,Tl=Symbol.for("react.element"),Cl=Symbol.for("react.fragment"),Pl=Object.prototype.hasOwnProperty,Ol=Al.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rl={key:!0,ref:!0,__self:!0,__source:!0};function li(r,e,t){var s,n={},a=null,i=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)Pl.call(e,s)&&!Rl.hasOwnProperty(s)&&(n[s]=e[s]);if(r&&r.defaultProps)for(s in e=r.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Tl,type:r,key:a,ref:i,props:n,_owner:Ol.current}}wr.Fragment=Cl;wr.jsx=li;wr.jsxs=li;oi.exports=wr;var o=oi.exports,en={},la=kl;en.createRoot=la.createRoot,en.hydrateRoot=la.hydrateRoot;function Il(){const r=()=>{window.location.reload()};return o.jsx("nav",{className:"bg-white shadow-sm",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsx(te,{to:"/",onClick:r,className:"flex items-center",children:o.jsx("img",{src:"/images/logo.png",alt:"Company Logo",className:"h-12 w-auto scale-110 transform hover:scale-105 transition-transform duration-200",style:{marginTop:"-4px",marginBottom:"-4px"}})})}),o.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[o.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200",children:"Features"}),o.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors duration-200",children:"Pricing"}),o.jsx(te,{to:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-500 hover:bg-blue-600 transition-colors shadow-sm hover:shadow-md",children:"Sign In"})]})]})})})}function $l({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const ci=p.forwardRef($l);function Ll({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Dl=p.forwardRef(Ll);function Ml({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const Fl=p.forwardRef(Ml);function Ul({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const Bl=p.forwardRef(Ul);function Wl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ql=p.forwardRef(Wl);function Vl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const Hl=p.forwardRef(Vl);function zl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const di=p.forwardRef(zl);function Zl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const ar=p.forwardRef(Zl);function Jl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Nn=p.forwardRef(Jl);function Gl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Yl=p.forwardRef(Gl);function Kl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ui=p.forwardRef(Kl);function Xl({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const _r=p.forwardRef(Xl);function Ql({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const ec=p.forwardRef(Ql);function tc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const sc=p.forwardRef(tc);function rc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"}))}const nc=p.forwardRef(rc);function ac({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const ic=p.forwardRef(ac);function oc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const En=p.forwardRef(oc);function lc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const hi=p.forwardRef(lc);function cc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const fi=p.forwardRef(cc);function dc(){return o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 border border-blue-500/20 rounded-lg",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"py-12 sm:py-16",children:[o.jsx("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full border border-blue-400/30 bg-blue-500/10 backdrop-blur-sm mb-8",children:o.jsx("span",{className:"text-blue-200 text-sm font-medium",children:"✨ AI-Powered Recruitment Solution"})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[o.jsxs("div",{className:"order-2 lg:order-1",children:[o.jsxs("h1",{children:[o.jsx("span",{className:"block text-3xl sm:text-5xl lg:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-indigo-200 leading-tight mb-4",children:"Transform Your Hiring Process"}),o.jsx("span",{className:"block text-2xl sm:text-4xl lg:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400",children:"With Intelligent CV Analysis"})]}),o.jsx("p",{className:"mt-6 text-base sm:text-lg text-blue-100/90 max-w-2xl leading-relaxed",children:"Make better hiring decisions faster with our advanced AI technology. Match candidates to jobs with precision and generate tailored interview plans instantly."}),o.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-stretch sm:items-center gap-4 sm:gap-6",children:[o.jsxs(te,{to:"/signup",className:"group relative inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold text-blue-900 bg-white rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 overflow-hidden",children:[o.jsx("span",{className:"relative z-10",children:"Start Free Trial"}),o.jsx(ci,{className:"ml-2 h-5 w-5 relative z-10 group-hover:translate-x-1 transition-transform"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-100 to-blue-50 opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsxs("a",{href:"#demo",className:"group inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold text-white border-2 border-white/20 rounded-xl backdrop-blur-sm hover:bg-white/10 transition-all duration-200",children:[o.jsx(nc,{className:"mr-2 h-5 w-5 sm:h-6 sm:w-6"}),"Watch Demo"]})]})]}),o.jsxs("div",{className:"relative w-full max-w-lg mx-auto order-1 lg:order-2 h-[20rem] sm:h-[24rem]",children:[o.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-72 h-[20rem] sm:h-[24rem] bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 shadow-xl transform -rotate-6 animate-float",children:o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-blue-200/30 animate-pulse"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-3 sm:h-4 w-28 sm:w-32 bg-blue-200/30 rounded animate-pulse"}),o.jsx("div",{className:"h-2 sm:h-3 w-20 sm:w-24 bg-blue-200/20 rounded animate-pulse"})]})]}),o.jsxs("div",{className:"space-y-2 pt-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 sm:w-4 h-3 sm:h-4 rounded bg-blue-200/30 animate-pulse"}),o.jsx("div",{className:"h-2 sm:h-3 w-28 sm:w-32 bg-blue-200/20 rounded animate-pulse"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 sm:w-4 h-3 sm:h-4 rounded bg-blue-200/30 animate-pulse"}),o.jsx("div",{className:"h-2 sm:h-3 w-36 sm:w-40 bg-blue-200/20 rounded animate-pulse"})]})]}),o.jsxs("div",{className:"space-y-3 pt-3",children:[o.jsx("div",{className:"h-3 sm:h-4 w-20 sm:w-24 bg-blue-200/30 rounded"}),[...Array(3)].map((r,e)=>o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-2 sm:h-3 bg-blue-200/20 rounded w-full"}),o.jsx("div",{className:"h-2 sm:h-3 bg-blue-200/20 rounded w-5/6"}),o.jsx("div",{className:"h-2 sm:h-3 bg-blue-200/20 rounded w-4/6"})]},e))]})]})}),o.jsx("div",{className:"absolute top-4 right-0 w-64 sm:w-72 h-[20rem] sm:h-[24rem] bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 shadow-xl transform rotate-6 animate-float delay-500",children:o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-4 sm:h-5 bg-indigo-200/30 rounded w-3/4"}),o.jsx("div",{className:"h-3 sm:h-4 bg-indigo-200/20 rounded w-1/2"})]}),o.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[o.jsx("div",{className:"w-8 sm:w-10 h-8 sm:h-10 rounded bg-indigo-200/30"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-2 sm:h-3 w-20 sm:w-24 bg-indigo-200/20 rounded"}),o.jsx("div",{className:"h-2 sm:h-3 w-28 sm:w-32 bg-indigo-200/20 rounded"})]})]}),o.jsxs("div",{className:"space-y-3 pt-3",children:[o.jsx("div",{className:"h-3 sm:h-4 w-28 sm:w-32 bg-indigo-200/30 rounded"}),[...Array(4)].map((r,e)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 sm:w-3 h-2 sm:h-3 rounded-full bg-indigo-200/30"}),o.jsx("div",{className:"h-2 sm:h-3 bg-indigo-200/20 rounded w-full"})]},e))]})]})}),o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[o.jsx("div",{className:"w-16 sm:w-20 h-16 sm:h-20 rounded-full bg-blue-500/20 animate-ping"}),o.jsx("div",{className:"absolute w-12 sm:w-16 h-12 sm:h-16 rounded-full bg-indigo-400/20 animate-pulse"}),o.jsx("div",{className:"absolute w-8 sm:w-12 h-8 sm:h-12 rounded-full bg-blue-400/30 animate-pulse delay-300"})]})]})]})]})})]})}const uc=[{name:"AI-Powered Analysis",description:"Advanced machine learning algorithms analyze CVs against job requirements with unprecedented accuracy.",icon:En,color:"bg-blue-400"},{name:"Smart Scoring",description:"Get detailed candidate fit scores and comprehensive breakdowns of qualifications.",icon:di,color:"bg-blue-400"},{name:"Instant Reports",description:"Generate professional PDF reports with detailed analysis and recommendations.",icon:_r,color:"bg-blue-400"},{name:"Interview Intelligence",description:"Get AI-generated interview questions tailored to each candidate's profile.",icon:sc,color:"bg-blue-400"},{name:"Technical Assessment",description:"Deep analysis of technical skills and experience levels.",icon:Bl,color:"bg-blue-400"},{name:"Bias Prevention",description:"Ensure fair and objective candidate evaluation with our AI system.",icon:ic,color:"bg-blue-400"}];function hc(){return o.jsxs("div",{className:"relative bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 py-24 overflow-hidden border border-blue-500/20 rounded-lg",id:"features",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16 transform transition-all duration-500 hover:scale-105",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Powerful Features for Modern Recruitment"}),o.jsx("p",{className:"text-xl text-blue-100/90 max-w-3xl mx-auto",children:"Everything you need to streamline your candidate evaluation process and make better hiring decisions."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:uc.map((r,e)=>o.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm rounded-xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border border-blue-300/30 hover:border-blue-400/50 transform hover:-translate-y-1",style:{animationDelay:`${e*100}ms`},children:[o.jsx("div",{className:`${r.color} rounded-lg p-3 w-12 h-12 flex items-center justify-center mb-6 transform transition-transform group-hover:scale-110 group-hover:rotate-3`,children:o.jsx(r.icon,{className:"h-6 w-6 text-white animate-pulse"})}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-3 group-hover:text-blue-200 transition-colors",children:r.name}),o.jsx("p",{className:"text-blue-100/80 group-hover:text-blue-100 transition-colors",children:r.description}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-indigo-400/10 opacity-0 group-hover:opacity-20 transition-opacity rounded-xl"})]},r.name))})]})]})}const fc=[{label:"Accuracy Rate",value:"95%",icon:En,description:"Match accuracy",gradient:"from-blue-400 to-indigo-400"},{label:"Time Saved",value:"75%",icon:ui,description:"Recruitment efficiency",gradient:"from-indigo-400 to-purple-400"},{label:"CVs Analyzed",value:"100K+",icon:_r,description:"And counting",gradient:"from-purple-400 to-pink-400"},{label:"Happy Recruiters",value:"5000+",icon:fi,description:"Trusted by professionals",gradient:"from-pink-400 to-red-400"}];function mc(){return o.jsxs("div",{className:"relative bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 py-24 overflow-hidden border border-blue-500/20 rounded-lg",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Proven Track Record"}),o.jsx("p",{className:"text-xl text-blue-100/90 max-w-3xl mx-auto",children:"Our platform delivers measurable results for recruitment teams worldwide"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:fc.map((r,e)=>o.jsxs("div",{className:"group relative bg-white/10 rounded-xl p-8 backdrop-blur-lg border border-white/20 hover:border-white/40 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl",style:{animationDelay:`${e*100}ms`},children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-500 rounded-xl`}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[o.jsx("div",{className:"p-3 rounded-lg bg-white/10 group-hover:bg-white/20 transition-colors duration-300",children:o.jsx(r.icon,{className:"h-6 w-6 text-white group-hover:scale-110 transform transition-transform duration-300"})}),o.jsx("h3",{className:"text-lg font-medium text-white group-hover:text-blue-200 transition-colors duration-300",children:r.label})]}),o.jsx("p",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-blue-200 mb-3",children:r.value}),o.jsx("p",{className:"text-sm text-blue-200 group-hover:text-blue-100 transition-colors duration-300",children:r.description})]}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"}),o.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/5 rounded-full blur-2xl group-hover:bg-white/10 transition-colors duration-300"})]},r.label))})]})]})}const ca=[{title:"Upload CV & Job Description",description:"Simply upload a CV and job description to get started.",icon:Fl,color:"bg-blue-500",gradient:"from-blue-500/10 to-blue-600/10"},{title:"AI Analysis",description:"Our advanced AI analyzes the match and generates insights.",icon:En,color:"bg-purple-500",gradient:"from-purple-500/10 to-purple-600/10"},{title:"Get Detailed Report",description:"Receive a comprehensive analysis with actionable insights.",icon:_r,color:"bg-green-500",gradient:"from-green-500/10 to-green-600/10"},{title:"Make Better Decisions",description:"Use data-driven insights to make informed hiring decisions.",icon:fi,color:"bg-indigo-500",gradient:"from-indigo-500/10 to-indigo-600/10"}];function pc(){return o.jsxs("div",{className:"relative bg-white py-24 overflow-hidden border border-blue-500/20 rounded-lg",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-5"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16 transform transition-all duration-500 hover:scale-105",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"How It Works"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Get started in minutes with our simple, powerful CV analysis process"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:ca.map((r,e)=>o.jsxs("div",{className:"relative h-full",children:[e<ca.length-1&&o.jsx("div",{className:"hidden lg:block absolute top-1/2 right-0 w-full h-0.5 bg-gray-200 transform translate-x-1/2"}),o.jsxs("div",{className:"group bg-white rounded-xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-200 hover:border-blue-400/50 transform hover:-translate-y-2 relative z-10 h-full flex flex-col",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl`}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-xl",children:[o.jsx("div",{className:`absolute w-2 h-2 ${r.color} rounded-full top-1/4 left-1/4 animate-float opacity-0 group-hover:opacity-30`}),o.jsx("div",{className:`absolute w-3 h-3 ${r.color} rounded-full top-3/4 right-1/4 animate-float-delayed opacity-0 group-hover:opacity-30`}),o.jsx("div",{className:`absolute w-2 h-2 ${r.color} rounded-full bottom-1/4 right-1/3 animate-float-slow opacity-0 group-hover:opacity-30`})]}),o.jsx("div",{className:`${r.color} rounded-full p-3 w-14 h-14 flex items-center justify-center mb-6 transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-6 group-hover:shadow-lg relative z-10`,children:o.jsx(r.icon,{className:"h-7 w-7 text-white group-hover:animate-pulse"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors relative z-10",children:r.title}),o.jsx("p",{className:"text-gray-600 group-hover:text-gray-900 transition-colors flex-grow relative z-10",children:r.description}),o.jsx("div",{className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-1 ${r.color} group-hover:w-1/2 transition-all duration-300 rounded-full`})]})]},r.title))})]})]})}function gc({title:r,titleId:e,...t},s){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?p.createElement("title",{id:e},r):null,p.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const yc=p.forwardRef(gc),bc=[{quote:"This tool has revolutionized our hiring process. We're making better decisions faster than ever.",author:"Sarah Johnson",role:"Head of Recruitment",company:"TechCorp Inc.",rating:5},{quote:"The AI analysis is incredibly accurate. It helps us identify the best candidates quickly and efficiently.",author:"Michael Chen",role:"Technical Recruiter",company:"Innovation Labs",rating:5},{quote:"The interview suggestions are spot-on. It's like having an expert recruiter guiding you through the process.",author:"Emma Williams",role:"HR Director",company:"Global Solutions",rating:5}];function vc(){return o.jsxs("div",{className:"relative bg-white py-24 overflow-hidden border border-blue-500/20 rounded-lg",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-5"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("p",{className:"inline-flex items-center px-4 py-1.5 rounded-full border border-blue-400/30 bg-blue-500/10 backdrop-blur-sm text-blue-600 text-sm font-medium mb-4",children:"Client Testimonials"}),o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Loved by Recruiters"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"See what hiring professionals are saying about our AI-powered CV analyzer"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:bc.map(r=>o.jsxs("div",{className:"group relative bg-white rounded-xl p-8 shadow-lg border border-blue-100 hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex space-x-1 mb-4",children:[...Array(r.rating)].map((e,t)=>o.jsx(yc,{className:"h-5 w-5 text-blue-400 group-hover:text-blue-500 transition-colors duration-300"},t))}),o.jsxs("blockquote",{className:"text-gray-600 mb-6 group-hover:text-gray-700 transition-colors",children:['"',r.quote,'"']}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:r.author}),o.jsx("p",{className:"text-sm text-gray-500 group-hover:text-gray-600 transition-colors",children:r.role}),o.jsx("p",{className:"text-sm text-gray-500 group-hover:text-gray-600 transition-colors",children:r.company})]})]}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-1 bg-blue-400 group-hover:w-1/2 transition-all duration-300 rounded-full"}),o.jsx("div",{className:"absolute top-4 right-4 w-12 h-12 bg-blue-400/5 rounded-full blur group-hover:bg-blue-400/10 transition-colors duration-300"})]},r.author))})]})]})}const wc={id:"free",name:"Free Trial",price:0,period:"month",analysisLimit:4,features:["Up to 4 CV analyses","Basic interview questions","PDF export functionality","Email support"]},_c={id:"pro",name:"Pro Plan",price:20,period:"month",analysisLimit:1e3,features:["1000 CV analyses per month","Advanced AI matching","Custom interview plans","Technical skill assessment","Team collaboration","Priority support","Analytics dashboard","Bulk analysis","API access"]},ye={FREE:wc,PRO:_c};function xc(){return o.jsxs("div",{className:"relative bg-white py-24 overflow-hidden border border-blue-500/20 rounded-lg",id:"pricing",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.02]"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("p",{className:"inline-flex items-center px-4 py-1.5 rounded-full border border-blue-400/30 bg-blue-500/10 backdrop-blur-sm text-blue-600 text-sm font-medium mb-4",children:"Flexible Plans"}),o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Choose the plan that's right for your recruitment needs"})]}),o.jsxs("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-1",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-blue-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:ye.FREE.name}),o.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Perfect for trying out our service"}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("span",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600",children:"$0"}),o.jsx("span",{className:"text-gray-600",children:"/month"}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Up to ",ye.FREE.analysisLimit," CV analyses"]})]}),o.jsx("ul",{className:"space-y-4 mb-8",children:ye.FREE.features.map((r,e)=>o.jsxs("li",{className:"flex items-start group/item",children:[o.jsx(ar,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5 group-hover/item:scale-110 transition-transform"}),o.jsx("span",{className:"ml-3 text-gray-600",children:r})]},e))}),o.jsx(te,{to:"/signup",className:"block w-full bg-gray-100 text-gray-800 text-center py-4 rounded-xl font-medium hover:bg-gray-200 transition-all duration-300 hover:shadow-lg",children:"Start Free Trial"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl shadow-xl overflow-hidden transform hover:scale-[1.02] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsxs("div",{className:"relative p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-white text-center mb-2",children:ye.PRO.name}),o.jsx("p",{className:"text-center text-blue-100 mb-6",children:"For serious recruiters"}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("span",{className:"text-5xl font-bold text-white",children:["$",ye.PRO.price]}),o.jsx("span",{className:"text-blue-100",children:"/month"}),o.jsxs("p",{className:"text-sm text-blue-100 mt-2",children:[ye.PRO.analysisLimit," analyses per month"]})]}),o.jsx("ul",{className:"space-y-4 mb-8",children:ye.PRO.features.map((r,e)=>o.jsxs("li",{className:"flex items-start group/item",children:[o.jsx(ar,{className:"h-5 w-5 text-white flex-shrink-0 mt-0.5 group-hover/item:scale-110 transition-transform"}),o.jsx("span",{className:"ml-3 text-white",children:r})]},e))}),o.jsx(te,{to:"/signup",className:"block w-full bg-white text-blue-600 text-center py-4 rounded-xl font-medium hover:bg-blue-50 transition-all duration-300 hover:shadow-lg",children:"Get Started"})]})]})]})]})]})}function jc(){return o.jsxs("div",{className:"relative overflow-hidden bg-white border border-blue-500/20 rounded-lg py-16 sm:py-20",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.02]"}),o.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-blue-100 rounded-full blur-3xl opacity-20 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-indigo-100 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"inline-flex items-center px-4 py-1.5 rounded-full border border-blue-400/30 bg-blue-500/10 backdrop-blur-sm text-blue-600 text-sm font-medium mb-8",children:"Trusted by Industry Leaders"}),o.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 mb-12",children:"Powering recruitment at world's leading companies"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-8 md:grid-cols-6 lg:grid-cols-5",children:[{src:"/logos/microsoft.svg",alt:"Microsoft"},{src:"/logos/google.svg",alt:"Google"},{src:"/logos/amazon.svg",alt:"Amazon"},{src:"/logos/meta.svg",alt:"Meta"},{src:"/logos/apple.svg",alt:"Apple"}].map((r,e)=>o.jsx("div",{className:"col-span-1 flex justify-center md:col-span-2 lg:col-span-1",children:o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-blue-100/60 to-indigo-100/60 rounded-lg blur opacity-0 group-hover:opacity-100 transition duration-500"}),o.jsx("img",{className:"relative h-12 opacity-50 group-hover:opacity-100 transition-opacity duration-300",src:r.src,alt:r.alt})]})},e))})]})]})}function kc(){return o.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-indigo-600 py-24 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-400 rounded-full blur-3xl opacity-20 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-400 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[o.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-6 leading-tight",children:["Ready to Transform Your ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-200 to-indigo-200",children:"Hiring Process?"})]}),o.jsx("p",{className:"text-xl sm:text-2xl text-blue-100 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Join thousands of recruiters who are making better hiring decisions with AI-powered CV analysis."}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-6",children:[o.jsxs(te,{to:"/signup",className:"group inline-flex items-center justify-center px-8 py-4 border border-transparent text-lg font-medium rounded-xl text-blue-600 bg-white hover:bg-blue-50 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl",children:["Get Started Free",o.jsx(ci,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),o.jsx(te,{to:"/pricing",className:"inline-flex items-center justify-center px-8 py-4 border-2 border-white text-lg font-medium rounded-xl text-white hover:bg-white/10 transition-all duration-300 backdrop-blur-sm transform hover:-translate-y-1",children:"View Pricing"})]})]})]})}function Sc(){return o.jsxs("div",{className:"bg-white",children:[o.jsx(Il,{}),o.jsx(dc,{}),o.jsx(jc,{}),o.jsx(hc,{}),o.jsx(pc,{}),o.jsx(mc,{}),o.jsx(vc,{}),o.jsx(xc,{}),o.jsx(kc,{}),o.jsx("footer",{className:"bg-gradient-to-b from-gray-50 to-gray-100 border-t border-gray-200",children:o.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-y-10 gap-x-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-500 tracking-wider uppercase",children:"Product"}),o.jsxs("ul",{className:"mt-4 space-y-4",children:[o.jsx("li",{children:o.jsx("a",{href:"#features",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Features"})}),o.jsx("li",{children:o.jsx("a",{href:"#pricing",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Pricing"})}),o.jsx("li",{children:o.jsx(te,{to:"/login",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Sign In"})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-500 tracking-wider uppercase",children:"Support"}),o.jsxs("ul",{className:"mt-4 space-y-4",children:[o.jsx("li",{children:o.jsx(te,{to:"/docs",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Documentation"})}),o.jsx("li",{children:o.jsx(te,{to:"/help",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Help Center"})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-500 tracking-wider uppercase",children:"Legal"}),o.jsxs("ul",{className:"mt-4 space-y-4",children:[o.jsx("li",{children:o.jsx(te,{to:"/privacy",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Privacy"})}),o.jsx("li",{children:o.jsx(te,{to:"/terms",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Terms"})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-500 tracking-wider uppercase",children:"Company"}),o.jsxs("ul",{className:"mt-4 space-y-4",children:[o.jsx("li",{children:o.jsx(te,{to:"/about",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"About"})}),o.jsx("li",{children:o.jsx(te,{to:"/contact",className:"text-base text-gray-600 hover:text-blue-600 transition-colors duration-200",children:"Contact"})})]})]})]}),o.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:o.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 sm:flex-row sm:space-y-0",children:[o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("img",{src:"/images/logo.png",alt:"Company Logo",className:"h-16 w-auto"})}),o.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," All rights reserved."]})]})})]})})]})}const Nc="modulepreload",Ec=function(r){return"/"+r},da={},$t=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");n=Promise.allSettled(t.map(c=>{if(c=Ec(c),c in da)return;da[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Nc,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Ac=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$t(async()=>{const{default:s}=await Promise.resolve().then(()=>Bt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class An extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Tc extends An{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cc extends An{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pc extends An{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(tn||(tn={}));var Oc=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Rc{constructor(e,{headers:t={},customFetch:s,region:n=tn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Ac(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Oc(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(b=>{throw new Tc(b)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Cc(u);if(!u.ok)throw new Pc(u);let f=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var he={},Tn={},xr={},Cs={},jr={},kr={},Ic=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lt=Ic();const $c=Lt.fetch,mi=Lt.fetch.bind(Lt),pi=Lt.Headers,Lc=Lt.Request,Dc=Lt.Response,Bt=Object.freeze(Object.defineProperty({__proto__:null,Headers:pi,Request:Lc,Response:Dc,default:mi,fetch:$c},Symbol.toStringTag,{value:"Module"})),Mc=Sl(Bt);var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});let Fc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Sr.default=Fc;var gi=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kr,"__esModule",{value:!0});const Uc=gi(Mc),Bc=gi(Sr);let Wc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Uc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let d=null,u=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const R=await a.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=R:u=JSON.parse(R))}const y=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),_=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await a.text();try{d=JSON.parse(y),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,m="OK")}catch{a.status===404&&y===""?(f=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d?.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new Bc.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(n=n.catch(a=>{var i,l,c;return{error:{message:`${(i=a?.name)!==null&&i!==void 0?i:"FetchError"}: ${a?.message}`,details:`${(l=a?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}};kr.default=Wc;var qc=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jr,"__esModule",{value:!0});const Vc=qc(kr);let Hc=class extends Vc.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jr.default=Hc;var zc=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cs,"__esModule",{value:!0});const Zc=zc(jr);let Jc=class extends Zc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Cs.default=Jc;var Gc=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xr,"__esModule",{value:!0});const Zt=Gc(Cs);let Yc=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new Zt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Zt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Zt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Zt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Zt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};xr.default=Yc;var Nr={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.version=void 0;Er.version="0.0.0-automated";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.DEFAULT_HEADERS=void 0;const Kc=Er;Nr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kc.version}`};var yi=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tn,"__esModule",{value:!0});const Xc=yi(xr),Qc=yi(Cs),ed=Nr;let td=class bi{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},ed.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Xc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new bi(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(i="POST",c=t);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new Qc.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Tn.default=td;var Wt=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(he,"__esModule",{value:!0});he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const vi=Wt(Tn);he.PostgrestClient=vi.default;const wi=Wt(xr);he.PostgrestQueryBuilder=wi.default;const _i=Wt(Cs);he.PostgrestFilterBuilder=_i.default;const xi=Wt(jr);he.PostgrestTransformBuilder=xi.default;const ji=Wt(kr);he.PostgrestBuilder=ji.default;const ki=Wt(Sr);he.PostgrestError=ki.default;var sd=he.default={PostgrestClient:vi.default,PostgrestQueryBuilder:wi.default,PostgrestFilterBuilder:_i.default,PostgrestTransformBuilder:xi.default,PostgrestBuilder:ji.default,PostgrestError:ki.default};const{PostgrestClient:rd,PostgrestQueryBuilder:Cg,PostgrestFilterBuilder:Pg,PostgrestTransformBuilder:Og,PostgrestBuilder:Rg,PostgrestError:Ig}=sd,nd="2.11.2",ad={"X-Client-Info":`realtime-js/${nd}`},id="1.0.0",Si=1e4,od=1e3;var Ct;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ct||(Ct={}));var pe;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(pe||(pe={}));var je;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(je||(je={}));var sn;(function(r){r.websocket="websocket"})(sn||(sn={}));var at;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(at||(at={}));class ld{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(e.slice(i,i+n));i=i+n;const c=s.decode(e.slice(i,i+a));i=i+a;const d=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ni{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(q||(q={}));const ua=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=cd(i,r,e,n),a),{})},cd=(r,e,t,s)=>{const n=e.find(l=>l.name===r),a=n?.type,i=t[r];return a&&!s.includes(a)?Ei(a,i):rn(i)},Ei=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return fd(e,t)}switch(r){case q.bool:return dd(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return ud(e);case q.json:case q.jsonb:return hd(e);case q.timestamp:return md(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return rn(e);default:return rn(e)}},rn=r=>r,dd=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ud=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},hd=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},fd=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Ei(e,l))}return r},md=r=>typeof r=="string"?r.replace(" ","T"):r,Ai=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Lr{constructor(e,t,s={},n=Si){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ha;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ha||(ha={}));class ls{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ls.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=ls.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ls.syncDiff(this.state,n,a,i),l())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),l={},c={};return this.map(a,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const h=a[d];if(h){const f=u.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),b=u.filter(_=>m.indexOf(_.presence_ref)<0),y=h.filter(_=>f.indexOf(_.presence_ref)<0);b.length>0&&(l[d]=b),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}s(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fa;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(fa||(fa={}));var ma;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ma||(ma={}));var Ue;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ue||(Ue={}));class Cn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lr(this,je.join,this.params,this.timeout),this.rejoinTimer=new Ni(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(je.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new ls(this),this.broadcastEndpointURL=Ai(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(u=>e?.(Ue.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Ue.CLOSED));const c={},d={broadcast:a,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e?.(Ue.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f?.length)!==null&&h!==void 0?h:0,b=[];for(let y=0;y<m;y++){const _=f[y],{filter:{event:R,schema:j,table:F,filter:I}}=_,L=u&&u[y];if(L&&L.event===R&&L.schema===j&&L.table===F&&L.filter===I)b.push(Object.assign(Object.assign({},_),{id:L.id}));else{this.unsubscribe(),e?.(Ue.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Ue.SUBSCRIBED);return}}).receive("error",u=>{e?.(Ue.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ue.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(je.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Lr(this,je.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Lr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=je;if(s&&[l,c,d,u].indexOf(i)>=0&&s!==this._joinRef())return;let f=this._onMessage(i,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var b,y,_;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((_=(y=m.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(m=>m.callback(f,s)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var b,y,_,R,j,F;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const I=m.id,L=(b=m.filter)===null||b===void 0?void 0:b.event;return I&&((y=t.ids)===null||y===void 0?void 0:y.includes(I))&&(L==="*"||L?.toLocaleLowerCase()===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const I=(j=(R=m?.filter)===null||R===void 0?void 0:R.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return I==="*"||I===((F=t?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:y,table:_,commit_timestamp:R,type:j,errors:F}=b;f=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:R,eventType:j,new:{},old:{},errors:F}),this._getPayloadRecords(b))}m.callback(f,s)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Cn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(je.close,{},e)}_onError(e){this._on(je.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ua(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ua(e.columns,e.old_record)),t}}const pd=()=>{},gd=typeof WebSocket<"u",yd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bd{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ad,this.params={},this.timeout=Si,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=pd,this.conn=null,this.sendBuffer=[],this.serializer=new ld,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>$t(async()=>{const{default:c}=await Promise.resolve().then(()=>Bt);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${sn.websocket}`,this.httpEndpoint=Ai(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,i)=>i(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ni(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(gd){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new vd(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$t(async()=>{const{default:e}=await import("./browser-Dwhluaoo.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:id}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ct.connecting:return at.Connecting;case Ct.open:return at.Open;case Ct.closing:return at.Closing;default:return at.Closed}}isConnected(){return this.connectionState()===at.Open}channel(e,t={config:{}}){const s=new Cn(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(je.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(od,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:a,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,a),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(je.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([yd],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class vd{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ct.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ee(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class wd extends Pn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nn extends Pn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var _d=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Ti=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$t(async()=>{const{default:s}=await Promise.resolve().then(()=>Bt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},xd=()=>_d(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $t(()=>Promise.resolve().then(()=>Bt),void 0)).Response:Response}),an=r=>{if(Array.isArray(r))return r.map(t=>an(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=an(s)}),e};var pt=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Dr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),jd=(r,e,t)=>pt(void 0,void 0,void 0,function*(){const s=yield xd();r instanceof s&&!t?.noResolveJson?r.json().then(n=>{e(new wd(Dr(n),r.status||500))}).catch(n=>{e(new nn(Dr(n),n))}):e(new nn(Dr(r),r))}),kd=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Ps(r,e,t,s,n,a){return pt(this,void 0,void 0,function*(){return new Promise((i,l)=>{r(t,kd(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>jd(c,l,s))})})}function ir(r,e,t,s){return pt(this,void 0,void 0,function*(){return Ps(r,"GET",e,t,s)})}function Je(r,e,t,s,n){return pt(this,void 0,void 0,function*(){return Ps(r,"POST",e,s,n,t)})}function Sd(r,e,t,s,n){return pt(this,void 0,void 0,function*(){return Ps(r,"PUT",e,s,n,t)})}function Nd(r,e,t,s){return pt(this,void 0,void 0,function*(){return Ps(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Ci(r,e,t,s,n){return pt(this,void 0,void 0,function*(){return Ps(r,"DELETE",e,s,n,t)})}var de=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Ed={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ad{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ti(n)}uploadOrUpdate(e,t,s,n){return de(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},pa),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:l},i?.duplex?{duplex:i.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(ee(a))return{data:null,error:a};throw a}})}upload(e,t,s){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return de(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:pa.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ee(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return de(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");const a=yield Je(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Pn("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}update(e,t,s){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return de(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}copy(e,t,s){return de(this,void 0,void 0,function*(){try{return{data:{path:(yield Je(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return de(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Je(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return de(this,void 0,void 0,function*(){try{const n=yield Je(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}download(e,t){return de(this,void 0,void 0,function*(){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ir(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ee(l))return{data:null,error:l};throw l}})}info(e){return de(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield ir(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:an(s),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}exists(e){return de(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Nd(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ee(s)&&s instanceof nn){const n=s.originalError;if([400,404].includes(n?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return de(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}list(e,t,s){return de(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ed),t),{prefix:e||""});return{data:yield Je(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Td="2.7.1",Cd={"X-Client-Info":`storage-js/${Td}`};var bt=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Pd{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Cd),t),this.fetch=Ti(s)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ee(e))return{data:null,error:e};throw e}})}getBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return bt(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}emptyBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}}class Od extends Pd{constructor(e,t={},s){super(e,t,s)}from(e){return new Ad(this.url,this.headers,e,this.fetch)}}const Rd="2.47.8";let Qt="";typeof Deno<"u"?Qt="deno":typeof document<"u"?Qt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qt="react-native":Qt="node";const Id={"X-Client-Info":`supabase-js-${Qt}/${Rd}`},$d={headers:Id},Ld={schema:"public"},Dd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Md={};var Fd=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Ud=r=>{let e;return r?e=r:typeof fetch>"u"?e=mi:e=fetch,(...t)=>e(...t)},Bd=()=>typeof Headers>"u"?pi:Headers,Wd=(r,e,t)=>{const s=Ud(t),n=Bd();return(a,i)=>Fd(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new n(i?.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:d}))})};var qd=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};function Vd(r){return r.replace(/\/$/,"")}function Hd(r,e){const{db:t,auth:s,realtime:n,global:a}=r,{db:i,auth:l,realtime:c,global:d}=e,u={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},d),a),accessToken:()=>qd(this,void 0,void 0,function*(){return""})};return r.accessToken?u.accessToken=r.accessToken:delete u.accessToken,u}const Pi="2.67.1",zd="http://localhost:9999",Zd="supabase.auth.token",Jd={"X-Client-Info":`gotrue-js/${Pi}`},ga=10,on="X-Supabase-Api-Version",Oi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Gd(r){return Math.round(Date.now()/1e3)+r}function Yd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const we=()=>typeof document<"u",tt={tested:!1,writable:!1},cs=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tt.tested)return tt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),tt.tested=!0,tt.writable=!0}catch{tt.tested=!0,tt.writable=!1}return tt.writable};function Mr(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ri=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$t(async()=>{const{default:s}=await Promise.resolve().then(()=>Bt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Kd=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ii=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Us=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bs=async(r,e)=>{await r.removeItem(e)};function Xd(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,a,i,l,c,d,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)i=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),d=e.indexOf(r.charAt(u++)),s=i<<2|l>>4,n=(l&15)<<4|c>>2,a=(c&3)<<6|d,t=t+String.fromCharCode(s),c!=64&&n!=0&&(t=t+String.fromCharCode(n)),d!=64&&a!=0&&(t=t+String.fromCharCode(a));return t}class Ar{constructor(){this.promise=new Ar.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ar.promiseConstructor=Promise;function ya(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Xd(s))}async function Qd(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function eu(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function tu(r){return("0"+r.toString(16)).substr(-2)}function su(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,tu).join("")}async function ru(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}function nu(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function au(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ru(r);return nu(t)}async function vt(r,e,t=!1){const s=su();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Ii(r,`${e}-code-verifier`,n);const a=await au(s);return[a,s===a?"plain":"s256"]}const iu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ou(r){const e=r.headers.get(on);if(!e||!e.match(iu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class On extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function A(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class lu extends On{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function cu(r){return A(r)&&r.name==="AuthApiError"}class $i extends On{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class gt extends On{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class ze extends gt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function du(r){return A(r)&&r.name==="AuthSessionMissingError"}class Fr extends gt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ws extends gt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qs extends gt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uu(r){return A(r)&&r.name==="AuthImplicitGrantRedirectError"}class ba extends gt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ln extends gt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ur(r){return A(r)&&r.name==="AuthRetryableFetchError"}class va extends gt{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var hu=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const rt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),fu=[502,503,504];async function wa(r){var e;if(!Kd(r))throw new ln(rt(r),0);if(fu.includes(r.status))throw new ln(rt(r),r.status);let t;try{t=await r.json()}catch(a){throw new $i(rt(a),a)}let s;const n=ou(r);if(n&&n.getTime()>=Oi["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new va(rt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ze}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new va(rt(t),r.status,t.weak_password.reasons);throw new lu(rt(t),r.status||500,s)}const mu=(r,e,t,s)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function P(r,e,t,s){var n;const a=Object.assign({},s?.headers);a[on]||(a[on]=Oi["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s?.query)!==null&&n!==void 0?n:{};s?.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await pu(r,e,t+l,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function pu(r,e,t,s,n,a){const i=mu(e,s,n,a);let l;try{l=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new ln(rt(c),0)}if(l.ok||await wa(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await wa(c)}}function Ze(r){var e;let t=null;vu(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Gd(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function _a(r){const e=Ze(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ge(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function gu(r){return{data:r,error:null}}function yu(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,i=hu(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function bu(r){return r}function vu(r){return r.access_token&&r.refresh_token&&r.expires_in}var wu=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class _u{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ri(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ge})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=wu(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s?.newEmail,delete n.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:yu,redirectTo:t?.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ge})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:bu});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);d[`${_}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(A(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ge})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ge})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ge})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}const xu={getItem:r=>cs()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{cs()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{cs()&&globalThis.localStorage.removeItem(r)}};function xa(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function ju(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wt={debug:!!(globalThis&&cs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Li extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ku extends Li{}async function Su(r,e,t){wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),wt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ku(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(wt.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ju();const Nu={url:zd,storageKey:Zd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Jt=30*1e3,ja=3;async function ka(r,e,t){return await t()}class fs{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fs.nextInstanceID,fs.nextInstanceID+=1,this.instanceID>0&&we()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Nu),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _u({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ri(n.fetch),this.lock=n.lock||ka,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:we()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Su:this.lock=ka,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:cs()?this.storage=xu:(this.memoryStorage={},this.storage=xa(this.memoryStorage)):(this.memoryStorage={},this.storage=xa(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=we()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:n}=await this._getSessionFromURL(t);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),uu(n)){const l=(e=n.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new $i("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ze}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await vt(this.storage,this.storageKey)),a=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:b},xform:Ze})}else if("phone"in e){const{phone:u,password:h,options:f}=e;a=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ze})}else throw new Ws("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:l}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_a})}else if("phone"in e){const{phone:a,password:i,options:l}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_a})}else throw new Ws("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Fr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Us(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ze});if(await Bs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Fr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(A(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,l=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Ze}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await vt(this.storage,this.storageKey));const{error:h}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(i=c?.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Ws("You must provide either an email or phone number.")}catch(l){if(A(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Ze});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(A(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await vt(this.storage,this.storageKey)),await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:gu})}catch(a){if(A(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ze;const{error:n}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await P(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:l}=await P(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:i?.message_id},error:l}}throw new Ws("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ge}):await this._useSession(async t=>{var s,n,a;const{data:i,error:l}=t;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ze}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:Ge})})}catch(t){if(A(t))return du(t)&&(await this._removeSession(),await Bs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new ze;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await vt(this.storage,this.storageKey));const{data:d,error:u}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Ge});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ya(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ze;const t=Date.now()/1e3;let s=t,n=!0,a=null;const i=ya(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:l}=t;if(l)throw l;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new ze;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!we())throw new qs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new qs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ba("Not a valid PKCE flow url.");const t=Mr(window.location.href);if(e){if(!t.code)throw new ba("No code detected.");const{data:j,error:F}=await this._exchangeCodeForSession(t.code);if(F)throw F;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:j.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new qs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!i||!d)throw new qs("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Jt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=f-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,u);const{data:y,error:_}=await this._getUser(a);if(_)throw _;const R={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:h,expires_at:f,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:t.type},error:null}}catch(t){if(A(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Mr(window.location.href);return!!(we()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Mr(window.location.href),t=await Us(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(cu(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Bs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Yd(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await vt(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(A(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,l,c,d,u;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return we()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(A(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await eu(async n=>(n>0&&await Qd(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ze})),(n,a)=>{const i=200*Math.pow(2,n);return a&&Ur(a)&&Date.now()+i-s<Jt})}catch(s){if(this._debug(t,"error",s),A(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),we()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Us(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),a=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+ga;if(this._debug(t,`session has${a?"":" not"} expired with margin of ${ga}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Ur(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ar;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new ze;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(n,"error",a),A(a)){const i={session:null,error:a};return Ur(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ii(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Bs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&we()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Jt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Jt}ms, refresh threshold is ${ja} ticks`),n<=ja&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Li)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await vt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await P(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c?.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:l}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}fs.nextInstanceID=0;const Eu=fs;class Au extends Eu{constructor(e){super(e)}}var Tu=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class Cu{constructor(e,t,s){var n,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Vd(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Ld,realtime:Md,auth:Object.assign(Object.assign({},Dd),{storageKey:c}),global:$d},u=Hd(s??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=Wd(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new rd(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Rc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Od(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Tu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:i,lock:l,debug:c},d,u){var h;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Au({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(e){return new bd(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Pu=(r,e,t)=>new Cu(r,e,t),Ou="https://your-production-project.supabase.co",Ru="your-production-anon-key",B=Pu(Ou,Ru);function dt({children:r,isLoading:e,variant:t="primary",...s}){const n="w-full py-2 px-4 rounded-md transition-colors disabled:opacity-50",a={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"};return o.jsx("button",{...s,className:`${n} ${a[t]}`,disabled:e||s.disabled,children:e?o.jsxs("span",{className:"flex items-center justify-center",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r})}function lt({label:r,error:e,...t}){return o.jsxs("div",{children:[o.jsx("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:r}),o.jsx("input",{...t,className:"mt-1 block w-full rounded-md border p-2 focus:border-blue-500 focus:ring focus:ring-blue-200"}),e&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]})}function Iu(){const[r,e]=p.useState(""),[t,s]=p.useState(""),[n,a]=p.useState(null),[i,l]=p.useState(!1),c=async d=>{d.preventDefault(),a(null),l(!0);try{const{error:u}=await B.auth.signInWithPassword({email:r,password:t});if(u)throw u}catch(u){a(u instanceof Error?u.message:"An error occurred")}finally{l(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsx(lt,{id:"email",type:"email",label:"Email",value:r,onChange:d=>e(d.target.value),required:!0}),o.jsx(lt,{id:"password",type:"password",label:"Password",value:t,onChange:d=>s(d.target.value),required:!0}),n&&o.jsx("div",{className:"text-red-600 text-sm",children:n}),o.jsx(dt,{type:"submit",isLoading:i,children:"Sign In"})]}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",o.jsx(te,{to:"/signup",className:"text-blue-600 hover:text-blue-700",children:"Sign up"})]})})]})}function $u(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Sign in to continue to CV Analyzer"}),o.jsx(Iu,{})]})})}function Lu(){const[r,e]=p.useState(""),[t,s]=p.useState(""),[n,a]=p.useState(""),[i,l]=p.useState(null),[c,d]=p.useState(!1),u=async h=>{if(h.preventDefault(),l(null),t!==n){l("Passwords do not match");return}d(!0);try{const{error:f}=await B.auth.signUp({email:r,password:t,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(f)throw f}catch(f){l(f instanceof Error?f.message:"An error occurred")}finally{d(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsx(lt,{id:"email",type:"email",label:"Email",value:r,onChange:h=>e(h.target.value),required:!0}),o.jsx(lt,{id:"password",type:"password",label:"Password",value:t,onChange:h=>s(h.target.value),required:!0}),o.jsx(lt,{id:"confirmPassword",type:"password",label:"Confirm Password",value:n,onChange:h=>a(h.target.value),required:!0}),i&&o.jsx("div",{className:"text-red-600 text-sm",children:i}),o.jsx(dt,{type:"submit",isLoading:c,children:"Sign Up"})]}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",o.jsx(te,{to:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign in"})]})})]})}function Du(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Create Account"}),o.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Join CV Analyzer to start analyzing candidates"}),o.jsx(Lu,{})]})})}const Br={AUTH:{INVALID_CREDENTIALS:"Invalid email or password",EMAIL_IN_USE:"This email is already registered",WEAK_PASSWORD:"Password must be at least 8 characters",SESSION_EXPIRED:"Your session has expired. Please sign in again"},API:{GENERAL:"An unexpected error occurred",NETWORK:"Network error. Please check your connection",RATE_LIMIT:"Too many requests. Please try again later"},ANALYSIS:{FAILED:"Failed to analyze CV",NOT_FOUND:"Analysis not found",LIMIT_REACHED:"Analysis limit reached. Please upgrade your plan"}},Mu={VITE_SUPABASE_URL:"https://your-production-project.supabase.co",VITE_SUPABASE_ANON_KEY:"your-production-anon-key",VITE_OPENAI_API_KEY:"your-production-openai-key",VITE_STRIPE_PUBLIC_KEY:"your-production-stripe-key"};Object.entries(Mu).forEach(([r,e])=>{if(!e)throw new Error(`Missing required environment variable: ${r}`)});function Rn(r){return r instanceof Error?r.name==="AuthError"?Br.AUTH.INVALID_CREDENTIALS:r.name==="NetworkError"?Br.API.NETWORK:r.message:Br.API.GENERAL}function Tr(){const[r,e]=p.useState(null),[t,s]=p.useState(!0);return p.useEffect(()=>{B.auth.getSession().then(({data:{session:i}})=>{e(i),s(!1)});const{data:{subscription:a}}=B.auth.onAuthStateChange((i,l)=>{e(l),l&&hs.trackEvent("user_signed_in")});return()=>a.unsubscribe()},[]),{session:r,loading:t,signOut:async()=>{try{const{error:a}=await B.auth.signOut();if(a)throw a;hs.trackEvent("user_signed_out")}catch(a){Rn(a)}}}}function Fu(){const{signOut:r}=Tr(),e=ai(),t=async()=>{try{await r(),e("/",{replace:!0})}catch(s){console.error("Sign out failed:",s)}};return o.jsx("header",{className:"bg-white shadow",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsx(te,{to:"/",className:"flex items-center",children:o.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-12 w-auto",onError:s=>{s.currentTarget.src="/images/fallback-logo.png"}})})}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[o.jsx(hi,{className:"h-5 w-5 mr-2"}),"Sign Out"]})})]})})})}function Di({label:r,error:e,...t}){return o.jsxs("div",{children:[o.jsx("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:r}),o.jsx("textarea",{...t,className:"mt-1 block w-full rounded-md border p-2 h-32 focus:border-blue-500 focus:ring focus:ring-blue-200"}),e&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]})}function Os(r,e){const[t,s]=p.useState(null),[n,a]=p.useState(!0),[i,l]=p.useState(null),c=p.useCallback(async()=>{try{a(!0),l(null);const d=await r();s(d)}catch(d){l(d instanceof Error?d.message:"An error occurred")}finally{a(!1)}},[r]);return p.useEffect(()=>{e?.enabled!==!1&&c()},[c,e?.enabled]),{data:t,isLoading:n,error:i,refetch:c}}class V extends Error{constructor(e,t,s){super(e),this.statusCode=t,this.code=s,this.name="ApiError"}}async function Uu(r){const{data:e}=await B.auth.getUser();if(!e?.user?.id)throw new V("User must be authenticated to upload candidates",401);const t={...r,user_id:e.user.id},{data:s,error:n}=await B.from("candidates").insert([t]).select("id, name, cv_text, created_at").single();if(n)throw n.code==="23505"?new V("A candidate with this name already exists",400):new V(`Failed to upload candidate: ${n.message}`,500);if(!s)throw new V("No data returned after candidate upload",500);return s}async function Bu(){const{data:r}=await B.auth.getUser();if(!r?.user?.id)throw new V("User must be authenticated to list candidates",401);const{data:e,error:t}=await B.from("candidates").select("id, name, cv_text, created_at").eq("user_id",r.user.id).order("created_at",{ascending:!1});if(t)throw new V(`Failed to fetch candidates: ${t.message}`,500);return e||[]}function Mi(){const{data:r,isLoading:e,error:t,refetch:s}=Os(Bu);return{candidates:r||[],isLoading:e,error:t,refetch:s}}function qe({size:r="md"}){const e={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return o.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${e[r]}`})}function Fi(r,e){p.useEffect(()=>{const t=s=>{!r.current||r.current.contains(s.target)||e()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[r,e])}function W(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Ye(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const Ui=6048e5,Wu=864e5,Vs=43200,Sa=1440;let qu={};function Rs(){return qu}function ms(r,e){const t=Rs(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,n=W(r),a=n.getDay(),i=(a<s?7:0)+a-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function or(r){return ms(r,{weekStartsOn:1})}function Bi(r){const e=W(r),t=e.getFullYear(),s=Ye(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const n=or(s),a=Ye(r,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const i=or(a);return e.getTime()>=n.getTime()?t+1:e.getTime()>=i.getTime()?t:t-1}function Na(r){const e=W(r);return e.setHours(0,0,0,0),e}function lr(r){const e=W(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Vu(r,e){const t=Na(r),s=Na(e),n=+t-lr(t),a=+s-lr(s);return Math.round((n-a)/Wu)}function Hu(r){const e=Bi(r),t=Ye(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),or(t)}function Xs(r,e){const t=W(r),s=W(e),n=t.getTime()-s.getTime();return n<0?-1:n>0?1:n}function zu(r){return Ye(r,Date.now())}function Zu(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ju(r){if(!Zu(r)&&typeof r!="number")return!1;const e=W(r);return!isNaN(Number(e))}function Gu(r,e){const t=W(r),s=W(e),n=t.getFullYear()-s.getFullYear(),a=t.getMonth()-s.getMonth();return n*12+a}function Yu(r){return e=>{const s=(r?Math[r]:Math.trunc)(e);return s===0?0:s}}function Ku(r,e){return+W(r)-+W(e)}function Xu(r){const e=W(r);return e.setHours(23,59,59,999),e}function Qu(r){const e=W(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function eh(r){const e=W(r);return+Xu(e)==+Qu(e)}function th(r,e){const t=W(r),s=W(e),n=Xs(t,s),a=Math.abs(Gu(t,s));let i;if(a<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-n*a);let l=Xs(t,s)===-n;eh(W(r))&&a===1&&Xs(r,s)===1&&(l=!1),i=n*(a-Number(l))}return i===0?0:i}function sh(r,e,t){const s=Ku(r,e)/1e3;return Yu(t?.roundingMethod)(s)}function rh(r){const e=W(r),t=Ye(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const nh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ah=(r,e,t)=>{let s;const n=nh[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Wr(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const ih={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ch={date:Wr({formats:ih,defaultWidth:"full"}),time:Wr({formats:oh,defaultWidth:"full"}),dateTime:Wr({formats:lh,defaultWidth:"full"})},dh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uh=(r,e,t,s)=>dh[r];function Gt(r){return(e,t)=>{const s=t?.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const i=r.defaultFormattingWidth||r.defaultWidth,l=t?.width?String(t.width):i;n=r.formattingValues[l]||r.formattingValues[i]}else{const i=r.defaultWidth,l=t?.width?String(t.width):r.defaultWidth;n=r.values[l]||r.values[i]}const a=r.argumentCallback?r.argumentCallback(e):e;return n[a]}}const hh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ph={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bh=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},vh={ordinalNumber:bh,era:Gt({values:hh,defaultWidth:"wide"}),quarter:Gt({values:fh,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Gt({values:mh,defaultWidth:"wide"}),day:Gt({values:ph,defaultWidth:"wide"}),dayPeriod:Gt({values:gh,defaultWidth:"wide",formattingValues:yh,defaultFormattingWidth:"wide"})};function Yt(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],a=e.match(n);if(!a)return null;const i=a[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?_h(l,h=>h.test(i)):wh(l,h=>h.test(i));let d;d=r.valueCallback?r.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(i.length);return{value:d,rest:u}}}function wh(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function _h(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function xh(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],a=e.match(r.parsePattern);if(!a)return null;let i=r.valueCallback?r.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const l=e.slice(n.length);return{value:i,rest:l}}}const jh=/^(\d+)(th|st|nd|rd)?/i,kh=/\d+/i,Sh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nh={any:[/^b/i,/^(a|c)/i]},Eh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ah={any:[/1/i,/2/i,/3/i,/4/i]},Th={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ch={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ph={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ih={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$h={ordinalNumber:xh({matchPattern:jh,parsePattern:kh,valueCallback:r=>parseInt(r,10)}),era:Yt({matchPatterns:Sh,defaultMatchWidth:"wide",parsePatterns:Nh,defaultParseWidth:"any"}),quarter:Yt({matchPatterns:Eh,defaultMatchWidth:"wide",parsePatterns:Ah,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Yt({matchPatterns:Th,defaultMatchWidth:"wide",parsePatterns:Ch,defaultParseWidth:"any"}),day:Yt({matchPatterns:Ph,defaultMatchWidth:"wide",parsePatterns:Oh,defaultParseWidth:"any"}),dayPeriod:Yt({matchPatterns:Rh,defaultMatchWidth:"any",parsePatterns:Ih,defaultParseWidth:"any"})},Wi={code:"en-US",formatDistance:ah,formatLong:ch,formatRelative:uh,localize:vh,match:$h,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Lh(r){const e=W(r);return Vu(e,rh(e))+1}function Dh(r){const e=W(r),t=+or(e)-+Hu(e);return Math.round(t/Ui)+1}function qi(r,e){const t=W(r),s=t.getFullYear(),n=Rs(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Ye(r,0);i.setFullYear(s+1,0,a),i.setHours(0,0,0,0);const l=ms(i,e),c=Ye(r,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=ms(c,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=d.getTime()?s:s-1}function Mh(r,e){const t=Rs(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,n=qi(r,e),a=Ye(r,0);return a.setFullYear(n,0,s),a.setHours(0,0,0,0),ms(a,e)}function Fh(r,e){const t=W(r),s=+ms(t,e)-+Mh(t,e);return Math.round(s/Ui)+1}function D(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Ve={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return D(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):D(t+1,2)},d(r,e){return D(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return D(r.getHours()%12||12,e.length)},H(r,e){return D(r.getHours(),e.length)},m(r,e){return D(r.getMinutes(),e.length)},s(r,e){return D(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return D(n,e.length)}},_t={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ea={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return Ve.y(r,e)},Y:function(r,e,t,s){const n=qi(r,s),a=n>0?n:1-n;if(e==="YY"){const i=a%100;return D(i,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):D(a,e.length)},R:function(r,e){const t=Bi(r);return D(t,e.length)},u:function(r,e){const t=r.getFullYear();return D(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return D(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return D(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Ve.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return D(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=Fh(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):D(n,e.length)},I:function(r,e,t){const s=Dh(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):D(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Ve.d(r,e)},D:function(r,e,t){const s=Lh(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):D(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),a=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return D(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),a=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return D(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return D(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=_t.noon:s===0?n=_t.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=_t.evening:s>=12?n=_t.afternoon:s>=4?n=_t.morning:n=_t.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Ve.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Ve.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):D(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):D(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Ve.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Ve.s(r,e)},S:function(r,e){return Ve.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ta(s);case"XXXX":case"XX":return nt(s);case"XXXXX":case"XXX":default:return nt(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return Ta(s);case"xxxx":case"xx":return nt(s);case"xxxxx":case"xxx":default:return nt(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Aa(s,":");case"OOOO":default:return"GMT"+nt(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Aa(s,":");case"zzzz":default:return"GMT"+nt(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return D(s,e.length)},T:function(r,e,t){const s=r.getTime();return D(s,e.length)}};function Aa(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),a=s%60;return a===0?t+String(n):t+String(n)+e+D(a,2)}function Ta(r,e){return r%60===0?(r>0?"-":"+")+D(Math.abs(r)/60,2):nt(r,e)}function nt(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=D(Math.trunc(s/60),2),a=D(s%60,2);return t+n+e+a}const Ca=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Vi=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Uh=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return Ca(r,e);let a;switch(s){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Ca(s,e)).replace("{{time}}",Vi(n,e))},Bh={p:Vi,P:Uh},Wh=/^D+$/,qh=/^Y+$/,Vh=["D","DD","YY","YYYY"];function Hh(r){return Wh.test(r)}function zh(r){return qh.test(r)}function Zh(r,e,t){const s=Jh(r,e,t);if(console.warn(s),Vh.includes(r))throw new RangeError(s)}function Jh(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kh=/^'([^]*?)'?$/,Xh=/''/g,Qh=/[a-zA-Z]/;function ef(r,e,t){const s=Rs(),n=s.locale??Wi,a=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,l=W(r);if(!Ju(l))throw new RangeError("Invalid time value");let c=e.match(Yh).map(u=>{const h=u[0];if(h==="p"||h==="P"){const f=Bh[h];return f(u,n.formatLong)}return u}).join("").match(Gh).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:tf(u)};if(Ea[h])return{isToken:!0,value:u};if(h.match(Qh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:i,locale:n};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(zh(h)||Hh(h))&&Zh(h,e,String(r));const f=Ea[h[0]];return f(l,h,n.localize,d)}).join("")}function tf(r){const e=r.match(Kh);return e?e[1].replace(Xh,"'"):r}function sf(r,e,t){const s=Rs(),n=t?.locale??s.locale??Wi,a=2520,i=Xs(r,e);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:i});let c,d;i>0?(c=W(e),d=W(r)):(c=W(r),d=W(e));const u=sh(d,c),h=(lr(d)-lr(c))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return t?.includeSeconds?u<5?n.formatDistance("lessThanXSeconds",5,l):u<10?n.formatDistance("lessThanXSeconds",10,l):u<20?n.formatDistance("lessThanXSeconds",20,l):u<40?n.formatDistance("halfAMinute",0,l):u<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):f===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",f,l);if(f<45)return n.formatDistance("xMinutes",f,l);if(f<90)return n.formatDistance("aboutXHours",1,l);if(f<Sa){const b=Math.round(f/60);return n.formatDistance("aboutXHours",b,l)}else{if(f<a)return n.formatDistance("xDays",1,l);if(f<Vs){const b=Math.round(f/Sa);return n.formatDistance("xDays",b,l)}else if(f<Vs*2)return m=Math.round(f/Vs),n.formatDistance("aboutXMonths",m,l)}if(m=th(d,c),m<12){const b=Math.round(f/Vs);return n.formatDistance("xMonths",b,l)}else{const b=m%12,y=Math.trunc(m/12);return b<3?n.formatDistance("aboutXYears",y,l):b<9?n.formatDistance("overXYears",y,l):n.formatDistance("almostXYears",y+1,l)}}function rf(r,e){return sf(r,zu(r),e)}function Hi(r){return ef(new Date(r),"MMMM d, yyyy")}function nf(r){return rf(new Date(r),{addSuffix:!0})}function af(r,e){return r.length<=e?r:`${r.slice(0,e)}...`}function of({onSelect:r}){const{candidates:e,isLoading:t}=Mi(),[s,n]=p.useState(!1),a=p.useRef(null);return Fi(a,()=>n(!1)),t?o.jsx(qe,{size:"sm"}):e.length?o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{type:"button",onClick:()=>n(!s),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-md transition-colors",children:[o.jsx("span",{children:"Previous CVs"}),o.jsx(Nn,{className:"ml-1 h-4 w-4"})]}),s&&o.jsx("div",{className:"absolute right-0 z-10 mt-2 w-96 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:o.jsx("div",{className:"max-h-60 overflow-auto py-1",children:e.map(i=>o.jsxs("button",{onClick:()=>{r({name:i.name,cvText:i.cv_text}),n(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[o.jsx("p",{className:"font-medium text-gray-900",children:i.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:af(i.cv_text,150)})]},i.id))})})]}):null}function lf({candidateName:r,cvText:e,onNameChange:t,onCvTextChange:s,errors:n={}}){return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Candidate Information"}),o.jsx("div",{className:"h-6 w-6 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-sm",children:"1"})})]}),o.jsx(of,{onSelect:({name:a,cvText:i})=>{t(a),s(i)}})]}),o.jsx(lt,{id:"candidateName",label:"Candidate Name",value:r,onChange:a=>t(a.target.value),error:n.name,placeholder:"Enter candidate's full name",required:!0}),o.jsx(Di,{id:"cvText",label:"CV Text",value:e,onChange:a=>s(a.target.value),error:n.cvText,placeholder:"Paste the candidate's CV content here...",required:!0})]})}async function cf(r,e,t=""){try{const{data:{user:s}}=await B.auth.getUser();if(!s)throw new Error("Not authenticated");const{data:n,error:a}=await B.from("jobs").insert([{title:r,jd_text:e,company:t,user_id:s.id}]).select().single();if(a)throw console.error("Upload error:",a),a;return n}catch(s){throw console.error("Upload job error:",s),new Error(`Failed to upload job: ${s instanceof Error?s.message:"Unknown error"}`)}}async function df(){try{const{data:{user:r}}=await B.auth.getUser();if(!r)throw new Error("Not authenticated");const{data:e,error:t}=await B.from("jobs").select("id, title, jd_text, company, created_at").eq("user_id",r.id).order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(r){throw console.error("Get jobs error:",r),new Error("Failed to fetch jobs")}}function zi(){const{data:r,isLoading:e,error:t,refetch:s}=Os(df);return{jobs:r||[],isLoading:e,error:t,refetch:s}}function uf({onSelect:r}){const{jobs:e,isLoading:t}=zi(),[s,n]=p.useState(!1),a=p.useRef(null);return Fi(a,()=>n(!1)),t?o.jsx(qe,{size:"sm"}):e.length?o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{type:"button",onClick:()=>n(!s),"data-action":"select-job",className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-md transition-colors",children:[o.jsx("span",{children:"Previous Jobs"}),o.jsx(Nn,{className:"ml-1 h-4 w-4"})]}),s&&o.jsx("div",{className:"absolute right-0 z-10 mt-2 w-96 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:o.jsx("div",{className:"max-h-60 overflow-auto py-1",children:e.map(i=>o.jsxs("button",{onClick:()=>{r({title:i.title,description:i.jd_text}),n(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[o.jsx("p",{className:"font-medium text-gray-900",children:i.title}),o.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:i.jd_text})]},i.id))})})]}):null}function hf({jobTitle:r,jobDescription:e,onTitleChange:t,onDescriptionChange:s,errors:n={}}){return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Job Information"}),o.jsx("div",{className:"h-6 w-6 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-sm",children:"2"})})]}),o.jsx(uf,{onSelect:({title:a,description:i})=>{t(a),s(i)}})]}),o.jsx(lt,{id:"jobTitle",label:"Job Title",value:r,onChange:a=>t(a.target.value),error:n.title,placeholder:"Enter the job position title",required:!0}),o.jsx(Di,{id:"jobDescription",label:"Job Description",value:e,onChange:a=>s(a.target.value),error:n.description,placeholder:"Paste the job description here...",required:!0})]})}function ff({score:r,verdict:e}){const t=()=>{switch(e){case"GOOD_FIT":return"text-green-600 bg-green-50 border-green-200";case"NEEDS_CONSIDERATION":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"BAD_FIT":return"text-red-600 bg-red-50 border-red-200"}},s=()=>{switch(e){case"GOOD_FIT":return"Strong Match";case"NEEDS_CONSIDERATION":return"Potential Match";case"BAD_FIT":return"Not Suitable"}};return o.jsxs("div",{className:`p-6 rounded-lg border ${t()}`,children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Match Score"}),o.jsxs("div",{className:"flex items-baseline space-x-2",children:[o.jsx("span",{className:"text-5xl font-bold",children:r}),o.jsx("span",{className:"text-2xl",children:"/10"})]}),o.jsx("p",{className:"mt-2 text-sm font-medium",children:s()})]})}function mf({analysis:r}){const e=r.technical_skills||[];return e.length?o.jsx("div",{className:"space-y-6",children:e.map((t,s)=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"h-2 w-24 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${t.proficiency}%`}})}),o.jsxs("span",{className:"text-sm text-gray-600",children:[t.proficiency,"%"]})]})]}),o.jsx("p",{className:"text-sm text-gray-600",children:t.assessment}),t.recommendations&&o.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:["Recommendation: ",t.recommendations]})]},s))}):o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Technical skills analysis not available"})}function pf({factors:r=[]}){return r?.length?o.jsx("div",{className:"space-y-3",children:r.map((e,t)=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(ec,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm text-gray-700",children:e})]},t))}):o.jsx("p",{className:"text-sm text-gray-500 italic",children:"No significant risk factors identified"})}function gf({potential:r}){return r?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Growth Areas"}),o.jsx("div",{className:"space-y-2",children:r.areas.map((e,t)=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Dl,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm text-gray-700",children:e})]},t))})]}),r.recommendations.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Development Recommendations"}),o.jsx("ul",{className:"list-disc pl-5 space-y-1",children:r.recommendations.map((e,t)=>o.jsx("li",{className:"text-sm text-gray-600",children:e},t))})]})]}):o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Growth potential analysis not available"})}function yf({plan:r}){const[e,t]=p.useState(null),n=(a=>a.split(/(?=\w+\s*\(\d+\s*minutes?\):)/i).filter(Boolean).map(l=>{const c=l.match(/^(.*?)(?:\((\d+)\s*minutes?\):)(.*)/is);if(!c)return null;const[,d,u,h]=c,f=h.split(`
`).filter(Boolean).map(_=>_.trim()),m=f.filter(_=>_.startsWith("-")).map(_=>_.slice(1).trim()),b=f.filter(_=>_.toLowerCase().includes("red flag")).map(_=>_.replace(/^[^:]*:\s*/,""))||[],y=f.filter(_=>_.toLowerCase().includes("green flag")).map(_=>_.replace(/^[^:]*:\s*/,""))||[];return{title:d.trim(),duration:`${u} minutes`,questions:m,redFlags:b,greenFlags:y}}).filter(l=>l!==null))(r);return o.jsx("div",{className:"divide-y divide-gray-200",children:n.map((a,i)=>o.jsxs("div",{className:"py-4 first:pt-0 last:pb-0",children:[o.jsxs("button",{onClick:()=>t(e===a.title?null:a.title),className:"w-full flex items-center justify-between text-left",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900",children:a.title}),o.jsx("p",{className:"text-sm text-gray-500",children:a.duration})]}),e===a.title?o.jsx(Yl,{className:"h-5 w-5 text-gray-400"}):o.jsx(Nn,{className:"h-5 w-5 text-gray-400"})]}),e===a.title&&o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Questions:"}),o.jsx("ul",{className:"space-y-2",children:a.questions.map((l,c)=>o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-blue-600 mt-1",children:"•"}),o.jsx("span",{className:"text-gray-600",children:l})]},c))})]}),a.redFlags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-red-600 mb-2",children:"Watch out for:"}),o.jsx("ul",{className:"space-y-2",children:a.redFlags.map((l,c)=>o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-red-600 mt-1",children:"⚠"}),o.jsx("span",{className:"text-red-600",children:l})]},c))})]}),a.greenFlags.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-600 mb-2",children:"Positive Indicators:"}),o.jsx("ul",{className:"space-y-2",children:a.greenFlags.map((l,c)=>o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx("span",{className:"text-green-600 mt-1",children:"✓"}),o.jsx("span",{className:"text-green-600",children:l})]},c))})]})]})]},i))})}function Zi({analysis:r}){return o.jsxs("div",{className:"space-y-8",children:[o.jsx(ff,{score:r.fit_score,verdict:r.verdict}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Technical Analysis"}),o.jsx(mf,{analysis:r})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(pf,{factors:r.risk_factors}),o.jsx(gf,{potential:r.growth_potential})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interview Plan"}),o.jsx(yf,{plan:r.interview_plan})]})]})}var $;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const a={};for(const i of n)a[i]=i;return a},r.getValidEnumValues=n=>{const a=r.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),i={};for(const l of a)i[l]=n[l];return r.objectValues(i)},r.objectValues=n=>r.objectKeys(n).map(function(a){return n[a]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const a=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.push(i);return a},r.find=(n,a)=>{for(const i of n)if(a(i))return i},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,a=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}r.joinValues=s,r.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})($||($={}));var cn;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(cn||(cn={}));const w=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Be=r=>{switch(typeof r){case"undefined":return w.undefined;case"string":return w.string;case"number":return isNaN(r)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(r)?w.array:r===null?w.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?w.promise:typeof Map<"u"&&r instanceof Map?w.map:typeof Set<"u"&&r instanceof Set?w.set:typeof Date<"u"&&r instanceof Date?w.date:w.object;default:return w.unknown}},g=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bf=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class be extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},s={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let l=s,c=0;for(;c<i.path.length;){const d=i.path[c];c===i.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(i))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return n(this),s}static assert(e){if(!(e instanceof be))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}be.create=r=>new be(r);const Dt=(r,e)=>{let t;switch(r.code){case g.invalid_type:r.received===w.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,$.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(r.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(r.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(r.options)}, received '${r.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:$.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case g.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case g.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=e.defaultError,$.assertNever(r)}return{message:t}};let Ji=Dt;function vf(r){Ji=r}function cr(){return Ji}const dr=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,a=[...t,...n.path||[]],i={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(i,{data:e,defaultError:l}).message;return{...n,path:a,message:l}},wf=[];function v(r,e){const t=cr(),s=dr({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Dt?void 0:Dt].filter(n=>!!n)});r.common.issues.push(s)}class le{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return N;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const a=await n.key,i=await n.value;s.push({key:a,value:i})}return le.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:a,value:i}=n;if(a.status==="aborted"||i.status==="aborted")return N;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(s[a.value]=i.value)}return{status:e.value,value:s}}}const N=Object.freeze({status:"aborted"}),Et=r=>({status:"dirty",value:r}),ce=r=>({status:"valid",value:r}),dn=r=>r.status==="aborted",un=r=>r.status==="dirty",ut=r=>r.status==="valid",ps=r=>typeof Promise<"u"&&r instanceof Promise;function ur(r,e,t,s){if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function Gi(r,e,t,s,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var x;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(x||(x={}));var es,ts;class $e{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Pa=(r,e)=>{if(ut(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new be(r.common.issues);return this._error=t,this._error}}};function E(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,l)=>{var c,d;const{message:u}=r;return i.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:(d=u??t)!==null&&d!==void 0?d:l.defaultError}},description:n}}class T{get description(){return this._def.description}_getType(e){return Be(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Be(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new le,ctx:{common:e.parent.common,data:e.data,parsedType:Be(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ps(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t?.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Be(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Pa(n,a)}"~validate"(e){var t,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Be(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return ut(a)?{value:a.value}:{issues:n.common.issues}}catch(a){!((s=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>ut(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Be(e)},n=this._parse({data:e,path:s.path,parent:s}),a=await(ps(n)?n:Promise.resolve(n));return Pa(s,a)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{const i=e(n),l=()=>a.addIssue({code:g.custom,...s(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new Ae({schema:this,typeName:S.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ie.create(this,this._def)}nullable(){return et.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ee.create(this)}promise(){return Ft.create(this,this._def)}or(e){return vs.create([this,e],this._def)}and(e){return ws.create(this,e,this._def)}transform(e){return new Ae({...E(this._def),schema:this,typeName:S.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ss({...E(this._def),innerType:this,defaultValue:t,typeName:S.ZodDefault})}brand(){return new In({typeName:S.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ns({...E(this._def),innerType:this,catchValue:t,typeName:S.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Is.create(this,e)}readonly(){return Es.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _f=/^c[^\s-]{8,}$/i,xf=/^[0-9a-z]+$/,jf=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kf=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Sf=/^[a-z0-9_-]{21}$/i,Nf=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ef=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Af=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Tf="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qr;const Cf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Pf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Of=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Rf=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,If=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$f=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Yi="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Lf=new RegExp(`^${Yi}$`);function Ki(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Df(r){return new RegExp(`^${Ki(r)}$`)}function Xi(r){let e=`${Yi}T${Ki(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Mf(r,e){return!!((e==="v4"||!e)&&Cf.test(r)||(e==="v6"||!e)&&Of.test(r))}function Ff(r,e){if(!Nf.test(r))return!1;try{const[t]=r.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function Uf(r,e){return!!((e==="v4"||!e)&&Pf.test(r)||(e==="v6"||!e)&&Rf.test(r))}class ke extends T{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){const a=this._getOrReturnCtx(e);return v(a,{code:g.invalid_type,expected:w.string,received:a.parsedType}),N}const s=new le;let n;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:g.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:g.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,l=e.data.length<a.value;(i||l)&&(n=this._getOrReturnCtx(e,n),i?v(n,{code:g.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&v(n,{code:g.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Af.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"email",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")qr||(qr=new RegExp(Tf,"u")),qr.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"emoji",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")kf.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"uuid",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Sf.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"nanoid",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")_f.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cuid",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")xf.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cuid2",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")jf.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"ulid",code:g.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),v(n,{validation:"url",code:g.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"regex",code:g.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?Xi(a).test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?Lf.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?Df(a).test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:g.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?Ef.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"duration",code:g.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Mf(e.data,a.version)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"ip",code:g.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?Ff(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"jwt",code:g.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?Uf(e.data,a.version)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cidr",code:g.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?If.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"base64",code:g.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?$f.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"base64url",code:g.invalid_string,message:a.message}),s.dirty()):$.assertNever(a);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:g.invalid_string,...x.errToObj(s)})}_addCheck(e){return new ke({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...x.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...x.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...x.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...x.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...x.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...x.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...x.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(s=e?.local)!==null&&s!==void 0?s:!1,...x.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...x.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...x.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...x.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...x.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...x.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...x.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...x.errToObj(t)})}nonempty(e){return this.min(1,x.errToObj(e))}trim(){return new ke({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ke({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ke({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ke.create=r=>{var e;return new ke({checks:[],typeName:S.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...E(r)})};function Bf(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,a=parseInt(r.toFixed(n).replace(".","")),i=parseInt(e.toFixed(n).replace(".",""));return a%i/Math.pow(10,n)}class Ke extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){const a=this._getOrReturnCtx(e);return v(a,{code:g.invalid_type,expected:w.number,received:a.parsedType}),N}let s;const n=new le;for(const a of this._def.checks)a.kind==="int"?$.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{code:g.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Bf(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),v(s,{code:g.not_finite,message:a.message}),n.dirty()):$.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,s,n){return new Ke({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:x.toString(n)}]})}_addCheck(e){return new Ke({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:x.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ke.create=r=>new Ke({checks:[],typeName:S.ZodNumber,coerce:r?.coerce||!1,...E(r)});class Xe extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==w.bigint)return this._getInvalidInput(e);let s;const n=new le;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),v(s,{code:g.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):$.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return v(t,{code:g.invalid_type,expected:w.bigint,received:t.parsedType}),N}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,s,n){return new Xe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:x.toString(n)}]})}_addCheck(e){return new Xe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Xe.create=r=>{var e;return new Xe({checks:[],typeName:S.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...E(r)})};class gs extends T{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==w.boolean){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.boolean,received:s.parsedType}),N}return ce(e.data)}}gs.create=r=>new gs({typeName:S.ZodBoolean,coerce:r?.coerce||!1,...E(r)});class ht extends T{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){const a=this._getOrReturnCtx(e);return v(a,{code:g.invalid_type,expected:w.date,received:a.parsedType}),N}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return v(a,{code:g.invalid_date}),N}const s=new le;let n;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:g.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:g.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):$.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ht({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ht.create=r=>new ht({checks:[],coerce:r?.coerce||!1,typeName:S.ZodDate,...E(r)});class hr extends T{_parse(e){if(this._getType(e)!==w.symbol){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.symbol,received:s.parsedType}),N}return ce(e.data)}}hr.create=r=>new hr({typeName:S.ZodSymbol,...E(r)});class ys extends T{_parse(e){if(this._getType(e)!==w.undefined){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.undefined,received:s.parsedType}),N}return ce(e.data)}}ys.create=r=>new ys({typeName:S.ZodUndefined,...E(r)});class bs extends T{_parse(e){if(this._getType(e)!==w.null){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.null,received:s.parsedType}),N}return ce(e.data)}}bs.create=r=>new bs({typeName:S.ZodNull,...E(r)});class Mt extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return ce(e.data)}}Mt.create=r=>new Mt({typeName:S.ZodAny,...E(r)});class ct extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ce(e.data)}}ct.create=r=>new ct({typeName:S.ZodUnknown,...E(r)});class We extends T{_parse(e){const t=this._getOrReturnCtx(e);return v(t,{code:g.invalid_type,expected:w.never,received:t.parsedType}),N}}We.create=r=>new We({typeName:S.ZodNever,...E(r)});class fr extends T{_parse(e){if(this._getType(e)!==w.undefined){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.void,received:s.parsedType}),N}return ce(e.data)}}fr.create=r=>new fr({typeName:S.ZodVoid,...E(r)});class Ee extends T{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==w.array)return v(t,{code:g.invalid_type,expected:w.array,received:t.parsedType}),N;if(n.exactLength!==null){const i=t.data.length>n.exactLength.value,l=t.data.length<n.exactLength.value;(i||l)&&(v(t,{code:i?g.too_big:g.too_small,minimum:l?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(v(t,{code:g.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(v(t,{code:g.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,l)=>n.type._parseAsync(new $e(t,i,t.path,l)))).then(i=>le.mergeArray(s,i));const a=[...t.data].map((i,l)=>n.type._parseSync(new $e(t,i,t.path,l)));return le.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new Ee({...this._def,minLength:{value:e,message:x.toString(t)}})}max(e,t){return new Ee({...this._def,maxLength:{value:e,message:x.toString(t)}})}length(e,t){return new Ee({...this._def,exactLength:{value:e,message:x.toString(t)}})}nonempty(e){return this.min(1,e)}}Ee.create=(r,e)=>new Ee({type:r,minLength:null,maxLength:null,exactLength:null,typeName:S.ZodArray,...E(e)});function kt(r){if(r instanceof z){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=Ie.create(kt(s))}return new z({...r._def,shape:()=>e})}else return r instanceof Ee?new Ee({...r._def,type:kt(r.element)}):r instanceof Ie?Ie.create(kt(r.unwrap())):r instanceof et?et.create(kt(r.unwrap())):r instanceof Le?Le.create(r.items.map(e=>kt(e))):r}class z extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=$.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==w.object){const d=this._getOrReturnCtx(e);return v(d,{code:g.invalid_type,expected:w.object,received:d.parsedType}),N}const{status:s,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof We&&this._def.unknownKeys==="strip"))for(const d in n.data)i.includes(d)||l.push(d);const c=[];for(const d of i){const u=a[d],h=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new $e(n,h,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof We){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")l.length>0&&(v(n,{code:g.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new $e(n,h,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>le.mergeObjectSync(s,d)):le.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,a,i,l;const c=(i=(a=(n=this._def).errorMap)===null||a===void 0?void 0:a.call(n,t,s).message)!==null&&i!==void 0?i:s.defaultError;return t.code==="unrecognized_keys"?{message:(l=x.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}extend(e){return new z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:S.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new z({...this._def,catchall:e})}pick(e){const t={};return $.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new z({...this._def,shape:()=>t})}omit(e){const t={};return $.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new z({...this._def,shape:()=>t})}deepPartial(){return kt(this)}partial(e){const t={};return $.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new z({...this._def,shape:()=>t})}required(e){const t={};return $.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Ie;)a=a._def.innerType;t[s]=a}}),new z({...this._def,shape:()=>t})}keyof(){return Qi($.objectKeys(this.shape))}}z.create=(r,e)=>new z({shape:()=>r,unknownKeys:"strip",catchall:We.create(),typeName:S.ZodObject,...E(e)});z.strictCreate=(r,e)=>new z({shape:()=>r,unknownKeys:"strict",catchall:We.create(),typeName:S.ZodObject,...E(e)});z.lazycreate=(r,e)=>new z({shape:r,unknownKeys:"strip",catchall:We.create(),typeName:S.ZodObject,...E(e)});class vs extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const i=a.map(l=>new be(l.ctx.common.issues));return v(t,{code:g.invalid_union,unionErrors:i}),N}if(t.common.async)return Promise.all(s.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(n);{let a;const i=[];for(const c of s){const d={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const l=i.map(c=>new be(c));return v(t,{code:g.invalid_union,unionErrors:l}),N}}get options(){return this._def.options}}vs.create=(r,e)=>new vs({options:r,typeName:S.ZodUnion,...E(e)});const Me=r=>r instanceof xs?Me(r.schema):r instanceof Ae?Me(r.innerType()):r instanceof js?[r.value]:r instanceof Qe?r.options:r instanceof ks?$.objectValues(r.enum):r instanceof Ss?Me(r._def.innerType):r instanceof ys?[void 0]:r instanceof bs?[null]:r instanceof Ie?[void 0,...Me(r.unwrap())]:r instanceof et?[null,...Me(r.unwrap())]:r instanceof In||r instanceof Es?Me(r.unwrap()):r instanceof Ns?Me(r._def.innerType):[];class Cr extends T{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.object)return v(t,{code:g.invalid_type,expected:w.object,received:t.parsedType}),N;const s=this.discriminator,n=t.data[s],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(v(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),N)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const a of t){const i=Me(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of i){if(n.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);n.set(l,a)}}return new Cr({typeName:S.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...E(s)})}}function hn(r,e){const t=Be(r),s=Be(e);if(r===e)return{valid:!0,data:r};if(t===w.object&&s===w.object){const n=$.objectKeys(e),a=$.objectKeys(r).filter(l=>n.indexOf(l)!==-1),i={...r,...e};for(const l of a){const c=hn(r[l],e[l]);if(!c.valid)return{valid:!1};i[l]=c.data}return{valid:!0,data:i}}else if(t===w.array&&s===w.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let a=0;a<r.length;a++){const i=r[a],l=e[a],c=hn(i,l);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===w.date&&s===w.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class ws extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(a,i)=>{if(dn(a)||dn(i))return N;const l=hn(a.value,i.value);return l.valid?((un(a)||un(i))&&t.dirty(),{status:t.value,value:l.data}):(v(s,{code:g.invalid_intersection_types}),N)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,i])=>n(a,i)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ws.create=(r,e,t)=>new ws({left:r,right:e,typeName:S.ZodIntersection,...E(t)});class Le extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.array)return v(s,{code:g.invalid_type,expected:w.array,received:s.parsedType}),N;if(s.data.length<this._def.items.length)return v(s,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),N;!this._def.rest&&s.data.length>this._def.items.length&&(v(s,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...s.data].map((i,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new $e(s,i,s.path,l)):null}).filter(i=>!!i);return s.common.async?Promise.all(a).then(i=>le.mergeArray(t,i)):le.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Le({...this._def,rest:e})}}Le.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Le({items:r,typeName:S.ZodTuple,rest:null,...E(e)})};class _s extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.object)return v(s,{code:g.invalid_type,expected:w.object,received:s.parsedType}),N;const n=[],a=this._def.keyType,i=this._def.valueType;for(const l in s.data)n.push({key:a._parse(new $e(s,l,s.path,l)),value:i._parse(new $e(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?le.mergeObjectAsync(t,n):le.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof T?new _s({keyType:e,valueType:t,typeName:S.ZodRecord,...E(s)}):new _s({keyType:ke.create(),valueType:e,typeName:S.ZodRecord,...E(t)})}}class mr extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.map)return v(s,{code:g.invalid_type,expected:w.map,received:s.parsedType}),N;const n=this._def.keyType,a=this._def.valueType,i=[...s.data.entries()].map(([l,c],d)=>({key:n._parse(new $e(s,l,s.path,[d,"key"])),value:a._parse(new $e(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of i){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return N;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(d.value,u.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const c of i){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return N;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),l.set(d.value,u.value)}return{status:t.value,value:l}}}}mr.create=(r,e,t)=>new mr({valueType:e,keyType:r,typeName:S.ZodMap,...E(t)});class ft extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==w.set)return v(s,{code:g.invalid_type,expected:w.set,received:s.parsedType}),N;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(v(s,{code:g.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(v(s,{code:g.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const d=new Set;for(const u of c){if(u.status==="aborted")return N;u.status==="dirty"&&t.dirty(),d.add(u.value)}return{status:t.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new $e(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>i(c)):i(l)}min(e,t){return new ft({...this._def,minSize:{value:e,message:x.toString(t)}})}max(e,t){return new ft({...this._def,maxSize:{value:e,message:x.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ft.create=(r,e)=>new ft({valueType:r,minSize:null,maxSize:null,typeName:S.ZodSet,...E(e)});class Pt extends T{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.function)return v(t,{code:g.invalid_type,expected:w.function,received:t.parsedType}),N;function s(l,c){return dr({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,cr(),Dt].filter(d=>!!d),issueData:{code:g.invalid_arguments,argumentsError:c}})}function n(l,c){return dr({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,cr(),Dt].filter(d=>!!d),issueData:{code:g.invalid_return_type,returnTypeError:c}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Ft){const l=this;return ce(async function(...c){const d=new be([]),u=await l._def.args.parseAsync(c,a).catch(m=>{throw d.addIssue(s(c,m)),d}),h=await Reflect.apply(i,this,u);return await l._def.returns._def.type.parseAsync(h,a).catch(m=>{throw d.addIssue(n(h,m)),d})})}else{const l=this;return ce(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new be([s(c,d.error)]);const u=Reflect.apply(i,this,d.data),h=l._def.returns.safeParse(u,a);if(!h.success)throw new be([n(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Pt({...this._def,args:Le.create(e).rest(ct.create())})}returns(e){return new Pt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Pt({args:e||Le.create([]).rest(ct.create()),returns:t||ct.create(),typeName:S.ZodFunction,...E(s)})}}class xs extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}xs.create=(r,e)=>new xs({getter:r,typeName:S.ZodLazy,...E(e)});class js extends T{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),N}return{status:"valid",value:e.data}}get value(){return this._def.value}}js.create=(r,e)=>new js({value:r,typeName:S.ZodLiteral,...E(e)});function Qi(r,e){return new Qe({values:r,typeName:S.ZodEnum,...E(e)})}class Qe extends T{constructor(){super(...arguments),es.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return v(t,{expected:$.joinValues(s),received:t.parsedType,code:g.invalid_type}),N}if(ur(this,es)||Gi(this,es,new Set(this._def.values)),!ur(this,es).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return v(t,{received:t.data,code:g.invalid_enum_value,options:s}),N}return ce(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qe.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}es=new WeakMap;Qe.create=Qi;class ks extends T{constructor(){super(...arguments),ts.set(this,void 0)}_parse(e){const t=$.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==w.string&&s.parsedType!==w.number){const n=$.objectValues(t);return v(s,{expected:$.joinValues(n),received:s.parsedType,code:g.invalid_type}),N}if(ur(this,ts)||Gi(this,ts,new Set($.getValidEnumValues(this._def.values))),!ur(this,ts).has(e.data)){const n=$.objectValues(t);return v(s,{received:s.data,code:g.invalid_enum_value,options:n}),N}return ce(e.data)}get enum(){return this._def.values}}ts=new WeakMap;ks.create=(r,e)=>new ks({values:r,typeName:S.ZodNativeEnum,...E(e)});class Ft extends T{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==w.promise&&t.common.async===!1)return v(t,{code:g.invalid_type,expected:w.promise,received:t.parsedType}),N;const s=t.parsedType===w.promise?t.data:Promise.resolve(t.data);return ce(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ft.create=(r,e)=>new Ft({type:r,typeName:S.ZodPromise,...E(e)});class Ae extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===S.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:i=>{v(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){const i=n.transform(s.data,a);if(s.common.async)return Promise.resolve(i).then(async l=>{if(t.value==="aborted")return N;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?N:c.status==="dirty"||t.value==="dirty"?Et(c.value):c});{if(t.value==="aborted")return N;const l=this._def.schema._parseSync({data:i,path:s.path,parent:s});return l.status==="aborted"?N:l.status==="dirty"||t.value==="dirty"?Et(l.value):l}}if(n.type==="refinement"){const i=l=>{const c=n.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?N:(l.status==="dirty"&&t.dirty(),i(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?N:(l.status==="dirty"&&t.dirty(),i(l.value).then(()=>({status:t.value,value:l.value}))))}if(n.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ut(i))return i;const l=n.transform(i.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>ut(i)?Promise.resolve(n.transform(i.value,a)).then(l=>({status:t.value,value:l})):i);$.assertNever(n)}}Ae.create=(r,e,t)=>new Ae({schema:r,typeName:S.ZodEffects,effect:e,...E(t)});Ae.createWithPreprocess=(r,e,t)=>new Ae({schema:e,effect:{type:"preprocess",transform:r},typeName:S.ZodEffects,...E(t)});class Ie extends T{_parse(e){return this._getType(e)===w.undefined?ce(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(r,e)=>new Ie({innerType:r,typeName:S.ZodOptional,...E(e)});class et extends T{_parse(e){return this._getType(e)===w.null?ce(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}et.create=(r,e)=>new et({innerType:r,typeName:S.ZodNullable,...E(e)});class Ss extends T{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===w.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ss.create=(r,e)=>new Ss({innerType:r,typeName:S.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class Ns extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return ps(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new be(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new be(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ns.create=(r,e)=>new Ns({innerType:r,typeName:S.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class pr extends T{_parse(e){if(this._getType(e)!==w.nan){const s=this._getOrReturnCtx(e);return v(s,{code:g.invalid_type,expected:w.nan,received:s.parsedType}),N}return{status:"valid",value:e.data}}}pr.create=r=>new pr({typeName:S.ZodNaN,...E(r)});const Wf=Symbol("zod_brand");class In extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Is extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?N:a.status==="dirty"?(t.dirty(),Et(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?N:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Is({in:e,out:t,typeName:S.ZodPipeline})}}class Es extends T{_parse(e){const t=this._def.innerType._parse(e),s=n=>(ut(n)&&(n.value=Object.freeze(n.value)),n);return ps(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}Es.create=(r,e)=>new Es({innerType:r,typeName:S.ZodReadonly,...E(e)});function eo(r,e={},t){return r?Mt.create().superRefine((s,n)=>{var a,i;if(!r(s)){const l=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(i=(a=l.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0,d=typeof l=="string"?{message:l}:l;n.addIssue({code:"custom",...d,fatal:c})}}):Mt.create()}const qf={object:z.lazycreate};var S;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(S||(S={}));const Vf=(r,e={message:`Input not instance of ${r.name}`})=>eo(t=>t instanceof r,e),to=ke.create,so=Ke.create,Hf=pr.create,zf=Xe.create,ro=gs.create,Zf=ht.create,Jf=hr.create,Gf=ys.create,Yf=bs.create,Kf=Mt.create,Xf=ct.create,Qf=We.create,em=fr.create,tm=Ee.create,sm=z.create,rm=z.strictCreate,nm=vs.create,am=Cr.create,im=ws.create,om=Le.create,lm=_s.create,cm=mr.create,dm=ft.create,um=Pt.create,hm=xs.create,fm=js.create,mm=Qe.create,pm=ks.create,gm=Ft.create,Oa=Ae.create,ym=Ie.create,bm=et.create,vm=Ae.createWithPreprocess,wm=Is.create,_m=()=>to().optional(),xm=()=>so().optional(),jm=()=>ro().optional(),km={string:r=>ke.create({...r,coerce:!0}),number:r=>Ke.create({...r,coerce:!0}),boolean:r=>gs.create({...r,coerce:!0}),bigint:r=>Xe.create({...r,coerce:!0}),date:r=>ht.create({...r,coerce:!0})},Sm=N;var K=Object.freeze({__proto__:null,defaultErrorMap:Dt,setErrorMap:vf,getErrorMap:cr,makeIssue:dr,EMPTY_PATH:wf,addIssueToContext:v,ParseStatus:le,INVALID:N,DIRTY:Et,OK:ce,isAborted:dn,isDirty:un,isValid:ut,isAsync:ps,get util(){return $},get objectUtil(){return cn},ZodParsedType:w,getParsedType:Be,ZodType:T,datetimeRegex:Xi,ZodString:ke,ZodNumber:Ke,ZodBigInt:Xe,ZodBoolean:gs,ZodDate:ht,ZodSymbol:hr,ZodUndefined:ys,ZodNull:bs,ZodAny:Mt,ZodUnknown:ct,ZodNever:We,ZodVoid:fr,ZodArray:Ee,ZodObject:z,ZodUnion:vs,ZodDiscriminatedUnion:Cr,ZodIntersection:ws,ZodTuple:Le,ZodRecord:_s,ZodMap:mr,ZodSet:ft,ZodFunction:Pt,ZodLazy:xs,ZodLiteral:js,ZodEnum:Qe,ZodNativeEnum:ks,ZodPromise:Ft,ZodEffects:Ae,ZodTransformer:Ae,ZodOptional:Ie,ZodNullable:et,ZodDefault:Ss,ZodCatch:Ns,ZodNaN:pr,BRAND:Wf,ZodBranded:In,ZodPipeline:Is,ZodReadonly:Es,custom:eo,Schema:T,ZodSchema:T,late:qf,get ZodFirstPartyTypeKind(){return S},coerce:km,any:Kf,array:tm,bigint:zf,boolean:ro,date:Zf,discriminatedUnion:am,effect:Oa,enum:mm,function:um,instanceof:Vf,intersection:im,lazy:hm,literal:fm,map:cm,nan:Hf,nativeEnum:pm,never:Qf,null:Yf,nullable:bm,number:so,object:sm,oboolean:jm,onumber:xm,optional:ym,ostring:_m,pipeline:wm,preprocess:vm,promise:gm,record:lm,set:dm,strictObject:rm,string:to,symbol:Jf,transformer:Oa,tuple:om,undefined:Gf,union:nm,unknown:Xf,void:em,NEVER:Sm,ZodIssueCode:g,quotelessJson:bf,ZodError:be});function Nm({initialValues:r,validationSchema:e,onSubmit:t}){const[s,n]=p.useState({values:r,errors:{},touched:{}}),a=p.useCallback((c,d)=>{n(u=>({...u,values:{...u.values,[c]:d},touched:{...u.touched,[c]:!0}}))},[]),i=p.useCallback((c,d)=>{if(!e)return"";try{return K.object({[c]:e._def.shape[c]}).parse({[c]:d}),""}catch(u){return u instanceof K.ZodError&&u.errors[0]?.message||""}},[e]),l=p.useCallback(async c=>{if(c.preventDefault(),e)try{e.parse(s.values)}catch(d){if(d instanceof K.ZodError){const u={};d.errors.forEach(h=>{h.path[0]&&(u[h.path[0]]=h.message)}),n(h=>({...h,errors:u}));return}}await t(s.values)},[s.values,e,t]);return{values:s.values,errors:s.errors,touched:s.touched,setFieldValue:a,validateField:i,handleSubmit:l}}function no(){const[r,e]=p.useState([]),t=p.useCallback((n,a="info")=>{e(i=>[...i,{id:Date.now(),message:n,type:a}])},[]),s=p.useCallback(n=>{e(a=>a.filter(i=>i.id!==n))},[]);return{toasts:r,addToast:t,removeToast:s}}function Em(r=!1){const[e,t]=p.useState(r),[s,n]=p.useState(null),a=p.useCallback(async i=>{t(!0),n(null);try{return await i}catch(l){const c=l instanceof Error?l.message:"An unexpected error occurred";throw n(c),l}finally{t(!1)}},[]);return{isLoading:e,error:s,withLoading:a}}const fn="RFC3986",mn={RFC1738:r=>String(r).replace(/%20/g,"+"),RFC3986:r=>String(r)},Am="RFC1738",Tm=Array.isArray,Ce=(()=>{const r=[];for(let e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r})(),Vr=1024,Cm=(r,e,t,s,n)=>{if(r.length===0)return r;let a=r;if(typeof r=="symbol"?a=Symbol.prototype.toString.call(r):typeof r!="string"&&(a=String(r)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let i="";for(let l=0;l<a.length;l+=Vr){const c=a.length>=Vr?a.slice(l,l+Vr):a,d=[];for(let u=0;u<c.length;++u){let h=c.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===Am&&(h===40||h===41)){d[d.length]=c.charAt(u);continue}if(h<128){d[d.length]=Ce[h];continue}if(h<2048){d[d.length]=Ce[192|h>>6]+Ce[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=Ce[224|h>>12]+Ce[128|h>>6&63]+Ce[128|h&63];continue}u+=1,h=65536+((h&1023)<<10|c.charCodeAt(u)&1023),d[d.length]=Ce[240|h>>18]+Ce[128|h>>12&63]+Ce[128|h>>6&63]+Ce[128|h&63]}i+=d.join("")}return i};function Pm(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function Ra(r,e){if(Tm(r)){const t=[];for(let s=0;s<r.length;s+=1)t.push(e(r[s]));return t}return e(r)}const Om=Object.prototype.hasOwnProperty,ao={brackets(r){return String(r)+"[]"},comma:"comma",indices(r,e){return String(r)+"["+e+"]"},repeat(r){return String(r)}},Pe=Array.isArray,Rm=Array.prototype.push,io=function(r,e){Rm.apply(r,Pe(e)?e:[e])},Im=Date.prototype.toISOString,Y={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Cm,encodeValuesOnly:!1,format:fn,formatter:mn[fn],indices:!1,serializeDate(r){return Im.call(r)},skipNulls:!1,strictNullHandling:!1};function $m(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"}const Hr={};function oo(r,e,t,s,n,a,i,l,c,d,u,h,f,m,b,y,_,R){let j=r,F=R,I=0,L=!1;for(;(F=F.get(Hr))!==void 0&&!L;){const Z=F.get(r);if(I+=1,typeof Z<"u"){if(Z===I)throw new RangeError("Cyclic object value");L=!0}typeof F.get(Hr)>"u"&&(I=0)}if(typeof d=="function"?j=d(e,j):j instanceof Date?j=f?.(j):t==="comma"&&Pe(j)&&(j=Ra(j,function(Z){return Z instanceof Date?f?.(Z):Z})),j===null){if(a)return c&&!y?c(e,Y.encoder,_,"key",m):e;j=""}if($m(j)||Pm(j)){if(c){const Z=y?e:c(e,Y.encoder,_,"key",m);return[b?.(Z)+"="+b?.(c(j,Y.encoder,_,"value",m))]}return[b?.(e)+"="+b?.(String(j))]}const ae=[];if(typeof j>"u")return ae;let ie;if(t==="comma"&&Pe(j))y&&c&&(j=Ra(j,c)),ie=[{value:j.length>0?j.join(",")||null:void 0}];else if(Pe(d))ie=d;else{const Z=Object.keys(j);ie=u?Z.sort(u):Z}const se=l?String(e).replace(/\./g,"%2E"):String(e),X=s&&Pe(j)&&j.length===1?se+"[]":se;if(n&&Pe(j)&&j.length===0)return X+"[]";for(let Z=0;Z<ie.length;++Z){const J=ie[Z],ia=typeof J=="object"&&typeof J.value<"u"?J.value:j[J];if(i&&ia===null)continue;const $r=h&&l?J.replace(/\./g,"%2E"):J,jl=Pe(j)?typeof t=="function"?t(X,$r):X:X+(h?"."+$r:"["+$r+"]");R.set(r,I);const oa=new WeakMap;oa.set(Hr,R),io(ae,oo(ia,jl,t,s,n,a,i,l,t==="comma"&&y&&Pe(j)?null:c,d,u,h,f,m,b,y,_,oa))}return ae}function Lm(r=Y){if(typeof r.allowEmptyArrays<"u"&&typeof r.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof r.encodeDotInKeys<"u"&&typeof r.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=r.charset||Y.charset;if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=fn;if(typeof r.format<"u"){if(!Om.call(mn,r.format))throw new TypeError("Unknown format option provided.");t=r.format}const s=mn[t];let n=Y.filter;(typeof r.filter=="function"||Pe(r.filter))&&(n=r.filter);let a;if(r.arrayFormat&&r.arrayFormat in ao?a=r.arrayFormat:"indices"in r?a=r.indices?"indices":"repeat":a=Y.arrayFormat,"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof r.allowDots>"u"?r.encodeDotInKeys?!0:Y.allowDots:!!r.allowDots;return{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:Y.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof r.allowEmptyArrays=="boolean"?!!r.allowEmptyArrays:Y.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:Y.charsetSentinel,commaRoundTrip:!!r.commaRoundTrip,delimiter:typeof r.delimiter>"u"?Y.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:Y.encode,encodeDotInKeys:typeof r.encodeDotInKeys=="boolean"?r.encodeDotInKeys:Y.encodeDotInKeys,encoder:typeof r.encoder=="function"?r.encoder:Y.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:Y.encodeValuesOnly,filter:n,format:t,formatter:s,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:Y.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:Y.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:Y.strictNullHandling}}function Dm(r,e={}){let t=r;const s=Lm(e);let n,a;typeof s.filter=="function"?(a=s.filter,t=a("",t)):Pe(s.filter)&&(a=s.filter,n=a);const i=[];if(typeof t!="object"||t===null)return"";const l=ao[s.arrayFormat],c=l==="comma"&&s.commaRoundTrip;n||(n=Object.keys(t)),s.sort&&n.sort(s.sort);const d=new WeakMap;for(let f=0;f<n.length;++f){const m=n[f];s.skipNulls&&t[m]===null||io(i,oo(t[m],m,l,c,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,d))}const u=i.join(s.delimiter);let h=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""}const St="4.76.3";let Ia=!1,ds,lo,co,pn,uo,ho,fo,mo,po;function Mm(r,e={auto:!1}){if(Ia)throw new Error(`you must \`import 'openai/shims/${r.kind}'\` before importing anything else from openai`);if(ds)throw new Error(`can't \`import 'openai/shims/${r.kind}'\` after \`import 'openai/shims/${ds}'\``);Ia=e.auto,ds=r.kind,lo=r.fetch,co=r.FormData,pn=r.File,uo=r.ReadableStream,ho=r.getMultipartRequestOptions,fo=r.getDefaultAgent,mo=r.fileFromPath,po=r.isFsReadStream}class Fm{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Um({manuallyImported:r}={}){const e=r?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,s,n,a;try{t=fetch,s=Request,n=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:s,Response:n,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,l)=>({...l,body:new Fm(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}ds||Mm(Um(),{auto:!0});class C extends Error{}class ne extends C{constructor(e,t,s,n){super(`${ne.makeMessage(e,t,s)}`),this.status=e,this.headers=n,this.request_id=n?.["x-request-id"],this.error=t;const a=t;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,s){const n=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,s,n){if(!e||!n)return new Pr({message:s,cause:yn(t)});const a=t?.error;return e===400?new go(e,a,s,n):e===401?new yo(e,a,s,n):e===403?new bo(e,a,s,n):e===404?new vo(e,a,s,n):e===409?new wo(e,a,s,n):e===422?new _o(e,a,s,n):e===429?new xo(e,a,s,n):e>=500?new jo(e,a,s,n):new ne(e,a,s,n)}}class Se extends ne{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Pr extends ne{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class $n extends Pr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class go extends ne{}class yo extends ne{}class bo extends ne{}class vo extends ne{}class wo extends ne{}class _o extends ne{}class xo extends ne{}class jo extends ne{}class ko extends C{constructor(){super("Could not parse response content as the length limit was reached")}}class So extends C{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class mt{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const s=mt.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(mt.NEWLINE_REGEXP);return s&&n.pop(),n.length===1&&!s?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),s||(this.buffer=[n.pop()||""]),n)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new C(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new C(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new C("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}mt.NEWLINE_CHARS=new Set([`
`,"\r"]);mt.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Re{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*n(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const i of Bm(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null){let l;try{l=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(l&&l.error)throw new ne(void 0,l.error,void 0,void 0);yield l}else{let l;try{l=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(i.event=="error")throw new ne(void 0,l.error,l.message,void 0);yield{event:i.event,data:l}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new Re(n,t)}static fromReadableStream(e,t){let s=!1;async function*n(){const i=new mt,l=No(e);for await(const c of l)for(const d of i.decode(c))yield d;for(const c of i.flush())yield c}async function*a(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let i=!1;try{for await(const l of n())i||l&&(yield JSON.parse(l));i=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{i||t.abort()}}return new Re(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),n=a=>({next:()=>{if(a.length===0){const i=s.next();e.push(i),t.push(i)}return a.shift()}});return[new Re(()=>n(e),this.controller),new Re(()=>n(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new uo({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:a,done:i}=await t.next();if(i)return n.close();const l=s.encode(JSON.stringify(a)+`
`);n.enqueue(l)}catch(a){n.error(a)}},async cancel(){await t.return?.()}})}}async function*Bm(r,e){if(!r.body)throw e.abort(),new C("Attempted to iterate over a response with no body");const t=new Vm,s=new mt,n=No(r.body);for await(const a of Wm(n))for(const i of s.decode(a)){const l=t.decode(i);l&&(yield l)}for(const a of s.flush()){const i=t.decode(a);i&&(yield i)}}async function*Wm(r){let e=new Uint8Array;for await(const t of r){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let n=new Uint8Array(e.length+s.length);n.set(e),n.set(s,e.length),e=n;let a;for(;(a=qm(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}function qm(r){for(let s=0;s<r.length-2;s++){if(r[s]===10&&r[s+1]===10||r[s]===13&&r[s+1]===13)return s+2;if(r[s]===13&&r[s+1]===10&&s+3<r.length&&r[s+2]===13&&r[s+3]===10)return s+4}return-1}class Vm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,n]=Hm(e,":");return n.startsWith(" ")&&(n=n.substring(1)),t==="event"?this.event=n:t==="data"&&this.data.push(n),null}}function Hm(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}function No(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Eo=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",Ao=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&Or(r),Or=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",zm=r=>Ao(r)||Eo(r)||po(r);async function To(r,e,t){if(r=await r,Ao(r))return r;if(Eo(r)){const n=await r.blob();e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=Or(n)?[await n.arrayBuffer()]:[n];return new pn(a,e,t)}const s=await Zm(r);if(e||(e=Gm(r)??"unknown_file"),!t?.type){const n=s[0]?.type;typeof n=="string"&&(t={...t,type:n})}return new pn(s,e,t)}async function Zm(r){let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(Or(r))e.push(await r.arrayBuffer());else if(Ym(r))for await(const t of r)e.push(t);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${r?.constructor?.name}; props: ${Jm(r)}`);return e}function Jm(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function Gm(r){return zr(r.name)||zr(r.filename)||zr(r.path)?.split(/[\\/]/).pop()}const zr=r=>{if(typeof r=="string")return r;if(typeof Buffer<"u"&&r instanceof Buffer)return String(r)},Ym=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",$a=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody",Ut=async r=>{const e=await Km(r.body);return ho(e,r)},Km=async r=>{const e=new co;return await Promise.all(Object.entries(r||{}).map(([t,s])=>gn(e,t,s))),e},gn=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(zm(t)){const s=await To(t);r.append(e,s)}else if(Array.isArray(t))await Promise.all(t.map(s=>gn(r,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,n])=>gn(r,`${e}[${s}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Co={},Xm=function(r,e,t,s,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t},Qm=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},Hs;async function Po(r){const{response:e}=r;if(r.options.stream)return Ot("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):Re.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;const t=e.headers.get("content-type");if(t?.includes("application/json")||t?.includes("application/vnd.api+json")){const a=await e.json();return Ot("response",e.status,e.url,e.headers,a),Oo(a,e)}const n=await e.text();return Ot("response",e.status,e.url,e.headers,n),n}function Oo(r,e){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Rr extends Promise{constructor(e,t=Po){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Rr(this.responsePromise,async t=>Oo(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ep{constructor({baseURL:e,maxRetries:t=2,timeout:s=6e5,httpAgent:n,fetch:a}){this.baseURL=e,this.maxRetries=Zr("maxRetries",t),this.timeout=Zr("timeout",s),this.httpAgent=n,this.fetch=a??lo}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ip(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${dp()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(async n=>{const a=n&&Or(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:a}}))}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const{method:s,path:n,query:a,headers:i={}}=e,l=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:$a(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,c=this.calculateContentLength(l),d=this.buildURL(n,a);"timeout"in e&&Zr("timeout",e.timeout);const u=e.timeout??this.timeout,h=e.httpAgent??this.httpAgent??fo(d),f=u+1e3;typeof h?.options?.timeout=="number"&&f>(h.options.timeout??0)&&(h.options.timeout=f),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:e,headers:i,contentLength:c,retryCount:t});return{req:{method:s,...l&&{body:l},headers:m,...h&&{agent:h},signal:e.signal??null},url:d,timeout:u}}buildHeaders({options:e,headers:t,contentLength:s,retryCount:n}){const a={};s&&(a["content-length"]=s);const i=this.defaultHeaders(e);return Fa(a,i),Fa(a,t),$a(e.body)&&ds!=="node"&&delete a["content-type"],Ua(i,"x-stainless-retry-count")===void 0&&Ua(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(n)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,s,n){return ne.generate(e,t,s,n)}request(e,t=null){return new Rr(this.makeRequest(e,t))}async makeRequest(e,t){const s=await e,n=s.maxRetries??this.maxRetries;t==null&&(t=n),await this.prepareOptions(s);const{req:a,url:i,timeout:l}=this.buildRequest(s,{retryCount:n-t});if(await this.prepareRequest(a,{url:i,options:s}),Ot("request",i,s,a.headers),s.signal?.aborted)throw new Se;const c=new AbortController,d=await this.fetchWithTimeout(i,a,l,c).catch(yn);if(d instanceof Error){if(s.signal?.aborted)throw new Se;if(t)return this.retryRequest(s,t);throw d.name==="AbortError"?new $n:new Pr({cause:d})}const u=sp(d.headers);if(!d.ok){if(t&&this.shouldRetry(d)){const _=`retrying, ${t} attempts remaining`;return Ot(`response (error; ${_})`,d.status,i,u),this.retryRequest(s,t,u)}const h=await d.text().catch(_=>yn(_).message),f=op(h),m=f?void 0:h;throw Ot(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,d.status,i,u,m),this.makeStatusError(d.status,f,m,u)}return{response:d,options:s,controller:c}}requestAPIList(e,t){const s=this.makeRequest(t,null);return new tp(this,s,e)}buildURL(e,t){const s=cp(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return Io(n)||(t={...n,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new C(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,s,n){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>n.abort());const l=setTimeout(()=>n.abort(),s);return this.fetch.call(void 0,e,{signal:n.signal,...i}).finally(()=>{clearTimeout(l)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s){let n;const a=s?.["retry-after-ms"];if(a){const l=parseFloat(a);Number.isNaN(l)||(n=l)}const i=s?.["retry-after"];if(i&&!n){const l=parseFloat(i);Number.isNaN(l)?n=Date.parse(i)-Date.now():n=l*1e3}if(!(n&&0<=n&&n<60*1e3)){const l=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,l)}return await $s(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),l=1-Math.random()*.25;return i*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${St}`}}class Ro{constructor(e,t,s,n){Hs.set(this,void 0),Xm(this,Hs,e),this.options=n,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new C("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const s=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[n,a]of s)e.url.searchParams.set(n,a);t.query=void 0,t.path=e.url.toString()}return await Qm(this,Hs,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Hs=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class tp extends Rr{constructor(e,t,s){super(t,async n=>new s(e,n.response,await Po(n),n.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const sp=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){const s=t.toString();return e[s.toLowerCase()]||e[s]}}),rp={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},fe=r=>typeof r=="object"&&r!==null&&!Io(r)&&Object.keys(r).every(e=>$o(rp,e)),np=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":St,"X-Stainless-OS":Da(Deno.build.os),"X-Stainless-Arch":La(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":St,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":St,"X-Stainless-OS":Da(process.platform),"X-Stainless-Arch":La(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const r=ap();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":St,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":St,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ap(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const s=t.exec(navigator.userAgent);if(s){const n=s[1]||0,a=s[2]||0,i=s[3]||0;return{browser:e,version:`${n}.${a}.${i}`}}}return null}const La=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",Da=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Ma;const ip=()=>Ma??(Ma=np()),op=r=>{try{return JSON.parse(r)}catch{return}},lp=/^[a-z][a-z0-9+.-]*:/i,cp=r=>lp.test(r),$s=r=>new Promise(e=>setTimeout(e,r)),Zr=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new C(`${r} must be an integer`);if(e<0)throw new C(`${r} must be a positive integer`);return e},yn=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null)try{return new Error(JSON.stringify(r))}catch{}return new Error(r)},zs=r=>{if(typeof process<"u")return Co?.[r]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(r)?.trim()};function Io(r){if(!r)return!0;for(const e in r)return!1;return!0}function $o(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Fa(r,e){for(const t in e){if(!$o(e,t))continue;const s=t.toLowerCase();if(!s)continue;const n=e[t];n===null?delete r[s]:n!==void 0&&(r[s]=n)}}function Ot(r,...e){typeof process<"u"&&Co?.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${r}`,...e)}const dp=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),up=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",hp=r=>typeof r?.get=="function",Ua=(r,e)=>{const t=e.toLowerCase();if(hp(r)){const s=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(n,a,i)=>a+i.toUpperCase());for(const n of[e,t,e.toUpperCase(),s]){const a=r.get(n);if(a)return a}}for(const[s,n]of Object.entries(r))if(s.toLowerCase()===t)return Array.isArray(n)?(n.length<=1||console.warn(`Received ${n.length} entries for the ${e} header, using the first entry.`),n[0]):n};function Jr(r){return r!=null&&typeof r=="object"&&!Array.isArray(r)}class fp extends Ro{constructor(e,t,s,n){super(e,t,s,n),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Te extends Ro{constructor(e,t,s,n){super(e,t,s,n),this.data=s.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class M{constructor(e){this._client=e}}let Lo=class extends M{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}},Ln=class extends M{constructor(){super(...arguments),this.completions=new Lo(this._client)}};Ln.Completions=Lo;class Do extends M{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}class Mo extends M{create(e,t){return this._client.post("/audio/transcriptions",Ut({body:e,...t}))}}class Fo extends M{create(e,t){return this._client.post("/audio/translations",Ut({body:e,...t}))}}class Ls extends M{constructor(){super(...arguments),this.transcriptions=new Mo(this._client),this.translations=new Fo(this._client),this.speech=new Do(this._client)}}Ls.Transcriptions=Mo;Ls.Translations=Fo;Ls.Speech=Do;class Dn extends M{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return fe(e)?this.list({},e):this._client.getAPIList("/batches",Mn,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Mn extends Te{}Dn.BatchesPage=Mn;class Fn extends M{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/assistants/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e={},t){return fe(e)?this.list({},e):this._client.getAPIList("/assistants",Un,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Un extends Te{}Fn.AssistantsPage=Un;function Ba(r){return typeof r.parse=="function"}const Rt=r=>r?.role==="assistant",Uo=r=>r?.role==="function",Bo=r=>r?.role==="tool";var _e=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},H=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},bn,Qs,er,ss,rs,tr,ns,Fe,as,gr,yr,Nt,Wo;class qo{constructor(){bn.add(this),this.controller=new AbortController,Qs.set(this,void 0),er.set(this,()=>{}),ss.set(this,()=>{}),rs.set(this,void 0),tr.set(this,()=>{}),ns.set(this,()=>{}),Fe.set(this,{}),as.set(this,!1),gr.set(this,!1),yr.set(this,!1),Nt.set(this,!1),_e(this,Qs,new Promise((e,t)=>{_e(this,er,e,"f"),_e(this,ss,t,"f")}),"f"),_e(this,rs,new Promise((e,t)=>{_e(this,tr,e,"f"),_e(this,ns,t,"f")}),"f"),H(this,Qs,"f").catch(()=>{}),H(this,rs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},H(this,bn,"m",Wo).bind(this))},0)}_connected(){this.ended||(H(this,er,"f").call(this),this._emit("connect"))}get ended(){return H(this,as,"f")}get errored(){return H(this,gr,"f")}get aborted(){return H(this,yr,"f")}abort(){this.controller.abort()}on(e,t){return(H(this,Fe,"f")[e]||(H(this,Fe,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=H(this,Fe,"f")[e];if(!s)return this;const n=s.findIndex(a=>a.listener===t);return n>=0&&s.splice(n,1),this}once(e,t){return(H(this,Fe,"f")[e]||(H(this,Fe,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{_e(this,Nt,!0,"f"),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){_e(this,Nt,!0,"f"),await H(this,rs,"f")}_emit(e,...t){if(H(this,as,"f"))return;e==="end"&&(_e(this,as,!0,"f"),H(this,tr,"f").call(this));const s=H(this,Fe,"f")[e];if(s&&(H(this,Fe,"f")[e]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!H(this,Nt,"f")&&!s?.length&&Promise.reject(n),H(this,ss,"f").call(this,n),H(this,ns,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!H(this,Nt,"f")&&!s?.length&&Promise.reject(n),H(this,ss,"f").call(this,n),H(this,ns,"f").call(this,n),this._emit("end")}}_emitFinal(){}}Qs=new WeakMap,er=new WeakMap,ss=new WeakMap,rs=new WeakMap,tr=new WeakMap,ns=new WeakMap,Fe=new WeakMap,as=new WeakMap,gr=new WeakMap,yr=new WeakMap,Nt=new WeakMap,bn=new WeakSet,Wo=function(e){if(_e(this,gr,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Se),e instanceof Se)return _e(this,yr,!0,"f"),this._emit("abort",e);if(e instanceof C)return this._emit("error",e);if(e instanceof Error){const t=new C(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new C(String(e)))};function Vo(r){return r?.$brand==="auto-parseable-response-format"}function Ds(r){return r?.$brand==="auto-parseable-tool"}function mp(r,e){return!e||!Ho(e)?{...r,choices:r.choices.map(t=>({...t,message:{...t.message,parsed:null,tool_calls:t.message.tool_calls??[]}}))}:Bn(r,e)}function Bn(r,e){const t=r.choices.map(s=>{if(s.finish_reason==="length")throw new ko;if(s.finish_reason==="content_filter")throw new So;return{...s,message:{...s.message,tool_calls:s.message.tool_calls?.map(n=>gp(e,n))??[],parsed:s.message.content&&!s.message.refusal?pp(e,s.message.content):null}}});return{...r,choices:t}}function pp(r,e){return r.response_format?.type!=="json_schema"?null:r.response_format?.type==="json_schema"?"$parseRaw"in r.response_format?r.response_format.$parseRaw(e):JSON.parse(e):null}function gp(r,e){const t=r.tools?.find(s=>s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Ds(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null}}}function yp(r,e){if(!r)return!1;const t=r.tools?.find(s=>s.function?.name===e.function.name);return Ds(t)||t?.function.strict||!1}function Ho(r){return Vo(r.response_format)?!0:r.tools?.some(e=>Ds(e)||e.type==="function"&&e.function.strict===!0)??!1}function bp(r){for(const e of r??[]){if(e.type!=="function")throw new C(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new C(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ue=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},oe,vn,br,wn,_n,xn,zo,jn;const Wa=10;class Zo extends qo{constructor(){super(...arguments),oe.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Uo(e)||Bo(e))&&e.content)this._emit("functionCallResult",e.content);else if(Rt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Rt(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new C("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ue(this,oe,"m",vn).call(this)}async finalMessage(){return await this.done(),ue(this,oe,"m",br).call(this)}async finalFunctionCall(){return await this.done(),ue(this,oe,"m",wn).call(this)}async finalFunctionCallResult(){return await this.done(),ue(this,oe,"m",_n).call(this)}async totalUsage(){return await this.done(),ue(this,oe,"m",xn).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=ue(this,oe,"m",br).call(this);t&&this._emit("finalMessage",t);const s=ue(this,oe,"m",vn).call(this);s&&this._emit("finalContent",s);const n=ue(this,oe,"m",wn).call(this);n&&this._emit("finalFunctionCall",n);const a=ue(this,oe,"m",_n).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",ue(this,oe,"m",xn).call(this))}async _createChatCompletion(e,t,s){const n=s?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),ue(this,oe,"m",zo).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Bn(a,t))}async _runChatCompletion(e,t,s){for(const n of t.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,t,s)}async _runFunctions(e,t,s){const n="function",{function_call:a="auto",stream:i,...l}=t,c=typeof a!="string"&&a?.name,{maxChatCompletions:d=Wa}=s||{},u={};for(const f of t.functions)u[f.name||f.function.name]=f;const h=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<d;++f){const b=(await this._createChatCompletion(e,{...l,function_call:a,functions:h,messages:[...this.messages]},s)).choices[0]?.message;if(!b)throw new C("missing message in ChatCompletion response");if(!b.function_call)return;const{name:y,arguments:_}=b.function_call,R=u[y];if(R){if(c&&c!==y){const L=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:n,name:y,content:L});continue}}else{const L=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${h.map(ae=>JSON.stringify(ae.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:y,content:L});continue}let j;try{j=Ba(R)?await R.parse(_):_}catch(L){this._addMessage({role:n,name:y,content:L instanceof Error?L.message:String(L)});continue}const F=await R.function(j,this),I=ue(this,oe,"m",jn).call(this,F);if(this._addMessage({role:n,name:y,content:I}),c)return}}async _runTools(e,t,s){const n="tool",{tool_choice:a="auto",stream:i,...l}=t,c=typeof a!="string"&&a?.function?.name,{maxChatCompletions:d=Wa}=s||{},u=t.tools.map(m=>{if(Ds(m)){if(!m.$callback)throw new C("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of u)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const f="tools"in t?u.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of t.messages)this._addMessage(m,!1);for(let m=0;m<d;++m){const y=(await this._createChatCompletion(e,{...l,tool_choice:a,tools:f,messages:[...this.messages]},s)).choices[0]?.message;if(!y)throw new C("missing message in ChatCompletion response");if(!y.tool_calls?.length)return;for(const _ of y.tool_calls){if(_.type!=="function")continue;const R=_.id,{name:j,arguments:F}=_.function,I=h[j];if(I){if(c&&c!==j){const se=`Invalid tool_call: ${JSON.stringify(j)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:n,tool_call_id:R,content:se});continue}}else{const se=`Invalid tool_call: ${JSON.stringify(j)}. Available options are: ${Object.keys(h).map(X=>JSON.stringify(X)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:R,content:se});continue}let L;try{L=Ba(I)?await I.parse(F):F}catch(se){const X=se instanceof Error?se.message:String(se);this._addMessage({role:n,tool_call_id:R,content:X});continue}const ae=await I.function(L,this),ie=ue(this,oe,"m",jn).call(this,ae);if(this._addMessage({role:n,tool_call_id:R,content:ie}),c)return}}}}oe=new WeakSet,vn=function(){return ue(this,oe,"m",br).call(this).content??null},br=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Rt(t)){const{function_call:s,...n}=t,a={...n,content:t.content??null,refusal:t.refusal??null};return s&&(a.function_call=s),a}}throw new C("stream ended without producing a ChatCompletionMessage with role=assistant")},wn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Rt(t)&&t?.function_call)return t.function_call;if(Rt(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},_n=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Uo(t)&&t.content!=null||Bo(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(n=>n.type==="function"&&n.id===t.tool_call_id)))return t.content}},xn=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},zo=function(e){if(e.n!=null&&e.n>1)throw new C("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},jn=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class As extends Zo{static runFunctions(e,t,s){const n=new As,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,a)),n}static runTools(e,t,s){const n=new As,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,a)),n}_addMessage(e,t=!0){super._addMessage(e,t),Rt(e)&&e.content&&this._emit("content",e.content)}}const Jo=1,Go=2,Yo=4,Ko=8,Xo=16,Qo=32,el=64,tl=128,sl=256,rl=tl|sl,nl=Xo|Qo|rl|el,al=Jo|Go|nl,il=Yo|Ko,vp=al|il,Q={STR:Jo,NUM:Go,ARR:Yo,OBJ:Ko,NULL:Xo,BOOL:Qo,NAN:el,INFINITY:tl,MINUS_INFINITY:sl,INF:rl,SPECIAL:nl,ATOM:al,COLLECTION:il,ALL:vp};class wp extends Error{}class _p extends Error{}function xp(r,e=Q.ALL){if(typeof r!="string")throw new TypeError(`expecting str, got ${typeof r}`);if(!r.trim())throw new Error(`${r} is empty`);return jp(r.trim(),e)}const jp=(r,e)=>{const t=r.length;let s=0;const n=f=>{throw new wp(`${f} at position ${s}`)},a=f=>{throw new _p(`${f} at position ${s}`)},i=()=>(h(),s>=t&&n("Unexpected end of input"),r[s]==='"'?l():r[s]==="{"?c():r[s]==="["?d():r.substring(s,s+4)==="null"||Q.NULL&e&&t-s<4&&"null".startsWith(r.substring(s))?(s+=4,null):r.substring(s,s+4)==="true"||Q.BOOL&e&&t-s<4&&"true".startsWith(r.substring(s))?(s+=4,!0):r.substring(s,s+5)==="false"||Q.BOOL&e&&t-s<5&&"false".startsWith(r.substring(s))?(s+=5,!1):r.substring(s,s+8)==="Infinity"||Q.INFINITY&e&&t-s<8&&"Infinity".startsWith(r.substring(s))?(s+=8,1/0):r.substring(s,s+9)==="-Infinity"||Q.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(r.substring(s))?(s+=9,-1/0):r.substring(s,s+3)==="NaN"||Q.NAN&e&&t-s<3&&"NaN".startsWith(r.substring(s))?(s+=3,NaN):u()),l=()=>{const f=s;let m=!1;for(s++;s<t&&(r[s]!=='"'||m&&r[s-1]==="\\");)m=r[s]==="\\"?!m:!1,s++;if(r.charAt(s)=='"')try{return JSON.parse(r.substring(f,++s-Number(m)))}catch(b){a(String(b))}else if(Q.STR&e)try{return JSON.parse(r.substring(f,s-Number(m))+'"')}catch{return JSON.parse(r.substring(f,r.lastIndexOf("\\"))+'"')}n("Unterminated string literal")},c=()=>{s++,h();const f={};try{for(;r[s]!=="}";){if(h(),s>=t&&Q.OBJ&e)return f;const m=l();h(),s++;try{const b=i();Object.defineProperty(f,m,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(Q.OBJ&e)return f;throw b}h(),r[s]===","&&s++}}catch{if(Q.OBJ&e)return f;n("Expected '}' at end of object")}return s++,f},d=()=>{s++;const f=[];try{for(;r[s]!=="]";)f.push(i()),h(),r[s]===","&&s++}catch{if(Q.ARR&e)return f;n("Expected ']' at end of array")}return s++,f},u=()=>{if(s===0){r==="-"&&Q.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(r)}catch(m){if(Q.NUM&e)try{return r[r.length-1]==="."?JSON.parse(r.substring(0,r.lastIndexOf("."))):JSON.parse(r.substring(0,r.lastIndexOf("e")))}catch{}a(String(m))}}const f=s;for(r[s]==="-"&&s++;r[s]&&!",]}".includes(r[s]);)s++;s==t&&!(Q.NUM&e)&&n("Unterminated number literal");try{return JSON.parse(r.substring(f,s))}catch{r.substring(f,s)==="-"&&Q.NUM&e&&n("Not sure what '-' is");try{return JSON.parse(r.substring(f,r.lastIndexOf("e")))}catch(b){a(String(b))}}},h=()=>{for(;s<t&&` 
\r	`.includes(r[s]);)s++};return i()},qa=r=>xp(r,Q.ALL^Q.NUM);var xt=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},U=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},G,De,jt,He,Gr,Zs,Yr,Kr,Xr,Js,Qr,Va;class Ts extends Zo{constructor(e){super(),G.add(this),De.set(this,void 0),jt.set(this,void 0),He.set(this,void 0),xt(this,De,e,"f"),xt(this,jt,[],"f")}get currentChatCompletionSnapshot(){return U(this,He,"f")}static fromReadableStream(e){const t=new Ts(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const n=new Ts(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,s){super._createChatCompletion;const n=s?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),U(this,G,"m",Gr).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const i of a)U(this,G,"m",Yr).call(this,i);if(a.controller.signal?.aborted)throw new Se;return this._addChatCompletion(U(this,G,"m",Js).call(this))}async _fromReadableStream(e,t){const s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),U(this,G,"m",Gr).call(this),this._connected();const n=Re.fromReadableStream(e,this.controller);let a;for await(const i of n)a&&a!==i.id&&this._addChatCompletion(U(this,G,"m",Js).call(this)),U(this,G,"m",Yr).call(this,i),a=i.id;if(n.controller.signal?.aborted)throw new Se;return this._addChatCompletion(U(this,G,"m",Js).call(this))}[(De=new WeakMap,jt=new WeakMap,He=new WeakMap,G=new WeakSet,Gr=function(){this.ended||xt(this,He,void 0,"f")},Zs=function(t){let s=U(this,jt,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},U(this,jt,"f")[t.index]=s,s)},Yr=function(t){if(this.ended)return;const s=U(this,G,"m",Va).call(this,t);this._emit("chunk",t,s);for(const n of t.choices){const a=s.choices[n.index];n.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",n.delta.content,a.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),n.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:a.message.refusal}),n.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:a.logprobs?.content??[]}),n.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const i=U(this,G,"m",Zs).call(this,a);a.finish_reason&&(U(this,G,"m",Xr).call(this,a),i.current_tool_call_index!=null&&U(this,G,"m",Kr).call(this,a,i.current_tool_call_index));for(const l of n.delta.tool_calls??[])i.current_tool_call_index!==l.index&&(U(this,G,"m",Xr).call(this,a),i.current_tool_call_index!=null&&U(this,G,"m",Kr).call(this,a,i.current_tool_call_index)),i.current_tool_call_index=l.index;for(const l of n.delta.tool_calls??[]){const c=a.message.tool_calls?.[l.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:l.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:l.function?.arguments??""}):(c?.type,void 0))}}},Kr=function(t,s){if(U(this,G,"m",Zs).call(this,t).done_tool_calls.has(s))return;const a=t.message.tool_calls?.[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const i=U(this,De,"f")?.tools?.find(l=>l.type==="function"&&l.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:Ds(i)?i.$parseRaw(a.function.arguments):i?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Xr=function(t){const s=U(this,G,"m",Zs).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const n=U(this,G,"m",Qr).call(this);this._emit("content.done",{content:t.message.content,parsed:n?n.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Js=function(){if(this.ended)throw new C("stream has ended, this shouldn't happen");const t=U(this,He,"f");if(!t)throw new C("request ended without sending any chunks");return xt(this,He,void 0,"f"),xt(this,jt,[],"f"),kp(t,U(this,De,"f"))},Qr=function(){const t=U(this,De,"f")?.response_format;return Vo(t)?t:null},Va=function(t){var s,n,a,i;let l=U(this,He,"f");const{choices:c,...d}=t;l?Object.assign(l,d):l=xt(this,He,{...d,choices:[]},"f");for(const{delta:u,finish_reason:h,index:f,logprobs:m=null,...b}of t.choices){let y=l.choices[f];if(y||(y=l.choices[f]={finish_reason:h,index:f,message:{},logprobs:m,...b}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:ae,refusal:ie,...se}=m;Object.assign(y.logprobs,se),ae&&((s=y.logprobs).content??(s.content=[]),y.logprobs.content.push(...ae)),ie&&((n=y.logprobs).refusal??(n.refusal=[]),y.logprobs.refusal.push(...ie))}if(h&&(y.finish_reason=h,U(this,De,"f")&&Ho(U(this,De,"f")))){if(h==="length")throw new ko;if(h==="content_filter")throw new So}if(Object.assign(y,b),!u)continue;const{content:_,refusal:R,function_call:j,role:F,tool_calls:I,...L}=u;if(Object.assign(y.message,L),R&&(y.message.refusal=(y.message.refusal||"")+R),F&&(y.message.role=F),j&&(y.message.function_call?(j.name&&(y.message.function_call.name=j.name),j.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=j.arguments)):y.message.function_call=j),_&&(y.message.content=(y.message.content||"")+_,!y.message.refusal&&U(this,G,"m",Qr).call(this)&&(y.message.parsed=qa(y.message.content))),I){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:ae,id:ie,type:se,function:X,...Z}of I){const J=(i=y.message.tool_calls)[ae]??(i[ae]={});Object.assign(J,Z),ie&&(J.id=ie),se&&(J.type=se),X&&(J.function??(J.function={name:X.name??"",arguments:""})),X?.name&&(J.function.name=X.name),X?.arguments&&(J.function.arguments+=X.arguments,yp(U(this,De,"f"),J)&&(J.function.parsed_arguments=qa(J.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",n=>{const a=t.shift();a?a.resolve(n):e.push(n)}),this.on("end",()=>{s=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{s=!0;for(const a of t)a.reject(n);t.length=0}),this.on("error",n=>{s=!0;for(const a of t)a.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function kp(r,e){const{id:t,choices:s,created:n,model:a,system_fingerprint:i,...l}=r,c={...l,id:t,choices:s.map(({message:d,finish_reason:u,index:h,logprobs:f,...m})=>{if(!u)throw new C(`missing finish_reason for choice ${h}`);const{content:b=null,function_call:y,tool_calls:_,...R}=d,j=d.role;if(!j)throw new C(`missing role for choice ${h}`);if(y){const{arguments:F,name:I}=y;if(F==null)throw new C(`missing function_call.arguments for choice ${h}`);if(!I)throw new C(`missing function_call.name for choice ${h}`);return{...m,message:{content:b,function_call:{arguments:F,name:I},role:j,refusal:d.refusal??null},finish_reason:u,index:h,logprobs:f}}return _?{...m,index:h,finish_reason:u,logprobs:f,message:{...R,role:j,content:b,refusal:d.refusal??null,tool_calls:_.map((F,I)=>{const{function:L,type:ae,id:ie,...se}=F,{arguments:X,name:Z,...J}=L||{};if(ie==null)throw new C(`missing choices[${h}].tool_calls[${I}].id
${Gs(r)}`);if(ae==null)throw new C(`missing choices[${h}].tool_calls[${I}].type
${Gs(r)}`);if(Z==null)throw new C(`missing choices[${h}].tool_calls[${I}].function.name
${Gs(r)}`);if(X==null)throw new C(`missing choices[${h}].tool_calls[${I}].function.arguments
${Gs(r)}`);return{...se,id:ie,type:ae,function:{...J,name:Z,arguments:X}}})}}:{...m,message:{...R,content:b,role:j,refusal:d.refusal??null},finish_reason:u,index:h,logprobs:f}}),created:n,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return mp(c,e)}function Gs(r){return JSON.stringify(r)}class It extends Ts{static fromReadableStream(e){const t=new It(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,s){const n=new It(null),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,a)),n}static runTools(e,t,s){const n=new It(t),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,a)),n}}let ol=class extends M{parse(e,t){return bp(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(s=>Bn(s,e))}runFunctions(e,t){return e.stream?It.runFunctions(this._client,e,t):As.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?It.runTools(this._client,e,t):As.runTools(this._client,e,t)}stream(e,t){return Ts.createChatCompletion(this._client,e,t)}};class kn extends M{constructor(){super(...arguments),this.completions=new ol(this._client)}}(function(r){r.Completions=ol})(kn||(kn={}));var k=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},me=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},re,Sn,Oe,sr,xe,ot,At,it,vr,ge,rr,nr,us,is,os,Ha,za,Za,Ja,Ga,Ya,Ka;class Ne extends qo{constructor(){super(...arguments),re.add(this),Sn.set(this,[]),Oe.set(this,{}),sr.set(this,{}),xe.set(this,void 0),ot.set(this,void 0),At.set(this,void 0),it.set(this,void 0),vr.set(this,void 0),ge.set(this,void 0),rr.set(this,void 0),nr.set(this,void 0),us.set(this,void 0)}[(Sn=new WeakMap,Oe=new WeakMap,sr=new WeakMap,xe=new WeakMap,ot=new WeakMap,At=new WeakMap,it=new WeakMap,vr=new WeakMap,ge=new WeakMap,rr=new WeakMap,nr=new WeakMap,us=new WeakMap,re=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",n=>{const a=t.shift();a?a.resolve(n):e.push(n)}),this.on("end",()=>{s=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{s=!0;for(const a of t)a.reject(n);t.length=0}),this.on("error",n=>{s=!0;for(const a of t)a.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Ne;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=Re.fromReadableStream(e,this.controller);for await(const a of n)k(this,re,"m",is).call(this,a);if(n.controller.signal?.aborted)throw new Se;return this._addRun(k(this,re,"m",os).call(this))}toReadableStream(){return new Re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,n,a){const i=new Ne;return i._run(()=>i._runToolAssistantStream(e,t,s,n,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,s,n,a){const i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.submitToolOutputs(t,s,l,{...a,signal:this.controller.signal});this._connected();for await(const d of c)k(this,re,"m",is).call(this,d);if(c.controller.signal?.aborted)throw new Se;return this._addRun(k(this,re,"m",os).call(this))}static createThreadAssistantStream(e,t,s){const n=new Ne;return n._run(()=>n._threadAssistantStream(e,t,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,s,n){const a=new Ne;return a._run(()=>a._runAssistantStream(e,t,s,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return k(this,rr,"f")}currentRun(){return k(this,nr,"f")}currentMessageSnapshot(){return k(this,xe,"f")}currentRunStepSnapshot(){return k(this,us,"f")}async finalRunSteps(){return await this.done(),Object.values(k(this,Oe,"f"))}async finalMessages(){return await this.done(),Object.values(k(this,sr,"f"))}async finalRun(){if(await this.done(),!k(this,ot,"f"))throw Error("Final run was not received.");return k(this,ot,"f")}async _createThreadAssistantStream(e,t,s){const n=s?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const l of i)k(this,re,"m",is).call(this,l);if(i.controller.signal?.aborted)throw new Se;return this._addRun(k(this,re,"m",os).call(this))}async _createAssistantStream(e,t,s,n){const a=n?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},l=await e.create(t,i,{...n,signal:this.controller.signal});this._connected();for await(const c of l)k(this,re,"m",is).call(this,c);if(l.controller.signal?.aborted)throw new Se;return this._addRun(k(this,re,"m",os).call(this))}static accumulateDelta(e,t){for(const[s,n]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=n;continue}let a=e[s];if(a==null){e[s]=n;continue}if(s==="index"||s==="type"){e[s]=n;continue}if(typeof a=="string"&&typeof n=="string")a+=n;else if(typeof a=="number"&&typeof n=="number")a+=n;else if(Jr(a)&&Jr(n))a=this.accumulateDelta(a,n);else if(Array.isArray(a)&&Array.isArray(n)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...n);continue}for(const i of n){if(!Jr(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const l=i.index;if(l==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const c=a[l];c==null?a.push(i):a[l]=this.accumulateDelta(c,i)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${n}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,n){return await this._createAssistantStream(t,e,s,n)}async _runToolAssistantStream(e,t,s,n,a){return await this._createToolAssistantStream(s,e,t,n,a)}}is=function(e){if(!this.ended)switch(me(this,rr,e,"f"),k(this,re,"m",Za).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":k(this,re,"m",Ka).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":k(this,re,"m",za).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":k(this,re,"m",Ha).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},os=function(){if(this.ended)throw new C("stream has ended, this shouldn't happen");if(!k(this,ot,"f"))throw Error("Final run has not been received");return k(this,ot,"f")},Ha=function(e){const[t,s]=k(this,re,"m",Ga).call(this,e,k(this,xe,"f"));me(this,xe,t,"f"),k(this,sr,"f")[t.id]=t;for(const n of s){const a=t.content[n.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if(n.type=="text"&&n.text){let a=n.text,i=t.content[n.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=k(this,At,"f")){if(k(this,it,"f"))switch(k(this,it,"f").type){case"text":this._emit("textDone",k(this,it,"f").text,k(this,xe,"f"));break;case"image_file":this._emit("imageFileDone",k(this,it,"f").image_file,k(this,xe,"f"));break}me(this,At,n.index,"f")}me(this,it,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(k(this,At,"f")!==void 0){const n=e.data.content[k(this,At,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,k(this,xe,"f"));break;case"text":this._emit("textDone",n.text,k(this,xe,"f"));break}}k(this,xe,"f")&&this._emit("messageDone",e.data),me(this,xe,void 0,"f")}},za=function(e){const t=k(this,re,"m",Ja).call(this,e);switch(me(this,us,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==k(this,vr,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(k(this,ge,"f")&&this._emit("toolCallDone",k(this,ge,"f")),me(this,vr,a.index,"f"),me(this,ge,t.step_details.tool_calls[a.index],"f"),k(this,ge,"f")&&this._emit("toolCallCreated",k(this,ge,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":me(this,us,void 0,"f"),e.data.step_details.type=="tool_calls"&&k(this,ge,"f")&&(this._emit("toolCallDone",k(this,ge,"f")),me(this,ge,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Za=function(e){k(this,Sn,"f").push(e),this._emit("event",e)},Ja=function(e){switch(e.event){case"thread.run.step.created":return k(this,Oe,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=k(this,Oe,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const n=Ne.accumulateDelta(t,s.delta);k(this,Oe,"f")[e.data.id]=n}return k(this,Oe,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":k(this,Oe,"f")[e.data.id]=e.data;break}if(k(this,Oe,"f")[e.data.id])return k(this,Oe,"f")[e.data.id];throw new Error("No snapshot available")},Ga=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(const a of n.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=k(this,re,"m",Ya).call(this,a,i)}else t.content[a.index]=a,s.push(a);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ya=function(e,t){return Ne.accumulateDelta(t,e)},Ka=function(e){switch(me(this,nr,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":me(this,ot,e.data,"f"),k(this,ge,"f")&&(this._emit("toolCallDone",k(this,ge,"f")),me(this,ge,void 0,"f"));break}};class Wn extends M{create(e,t,s){return this._client.post(`/threads/${e}/messages`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}update(e,t,s,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},s){return fe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,qn,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t,s){return this._client.delete(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}}class qn extends Te{}Wn.MessagesPage=qn;class Vn extends M{retrieve(e,t,s,n={},a){return fe(n)?this.retrieve(e,t,s,{},n):this._client.get(`/threads/${e}/runs/${t}/steps/${s}`,{query:n,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,t,s={},n){return fe(s)?this.list(e,t,{},s):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Hn,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Hn extends Te{}Vn.RunStepsPage=Hn;class Ms extends M{constructor(){super(...arguments),this.steps=new Vn(this._client)}create(e,t,s){const{include:n,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:n},body:a,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers},stream:t.stream??!1})}retrieve(e,t,s){return this._client.get(`/threads/${e}/runs/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}update(e,t,s,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},s){return fe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,zn,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}cancel(e,t,s){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const n=await this.create(e,t,s);return await this.poll(e,n.id,s)}createAndStream(e,t,s){return Ne.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){const n={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...s,headers:{...s?.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await $s(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,s){return Ne.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:s.stream??!1})}async submitToolOutputsAndPoll(e,t,s,n){const a=await this.submitToolOutputs(e,t,s,n);return await this.poll(e,a.id,n)}submitToolOutputsStream(e,t,s,n){return Ne.createToolAssistantStream(e,t,this._client.beta.threads.runs,s,n)}}class zn extends Te{}Ms.RunsPage=zn;Ms.Steps=Vn;Ms.RunStepsPage=Hn;class qt extends M{constructor(){super(...arguments),this.runs=new Ms(this._client),this.messages=new Wn(this._client)}create(e={},t){return fe(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/threads/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.thread_id,s.id,t)}createAndRunStream(e,t){return Ne.createThreadAssistantStream(e,this._client.beta.threads,t)}}qt.Runs=Ms;qt.RunsPage=zn;qt.Messages=Wn;qt.MessagesPage=qn;const Sp=async r=>{const e=await Promise.allSettled(r),t=e.filter(n=>n.status==="rejected");if(t.length){for(const n of t)console.error(n.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const n of e)n.status==="fulfilled"&&s.push(n.value);return s};let Zn=class extends M{create(e,t,s){return this._client.post(`/vector_stores/${e}/files`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t={},s){return fe(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Ir,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t,s){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const n=await this.create(e,t,s);return await this.poll(e,n.id,s)}async poll(e,t,s){const n={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...s,headers:n}).withResponse(),i=a.data;switch(i.status){case"in_progress":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await $s(l);break;case"failed":case"completed":return i}}}async upload(e,t,s){const n=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:n.id},s)}async uploadAndPoll(e,t,s){const n=await this.upload(e,t,s);return await this.poll(e,n.id,s)}};class Ir extends Te{}Zn.VectorStoreFilesPage=Ir;class ll extends M{create(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}cancel(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const n=await this.create(e,t);return await this.poll(e,n.id,s)}listFiles(e,t,s={},n){return fe(s)?this.listFiles(e,t,{},s):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Ir,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async poll(e,t,s){const n={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...s,headers:n}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await $s(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},n){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=n?.maxConcurrency??5,i=Math.min(a,t.length),l=this._client,c=t.values(),d=[...s];async function u(f){for(let m of f){const b=await l.files.create({file:m,purpose:"assistants"},n);d.push(b.id)}}const h=Array(i).fill(c).map(u);return await Sp(h),await this.createAndPoll(e,{file_ids:d})}}class Vt extends M{constructor(){super(...arguments),this.files=new Zn(this._client),this.fileBatches=new ll(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/vector_stores/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e={},t){return fe(e)?this.list({},e):this._client.getAPIList("/vector_stores",Jn,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Jn extends Te{}Vt.VectorStoresPage=Jn;Vt.Files=Zn;Vt.VectorStoreFilesPage=Ir;Vt.FileBatches=ll;class yt extends M{constructor(){super(...arguments),this.vectorStores=new Vt(this._client),this.chat=new kn(this._client),this.assistants=new Fn(this._client),this.threads=new qt(this._client)}}yt.VectorStores=Vt;yt.VectorStoresPage=Jn;yt.Assistants=Fn;yt.AssistantsPage=Un;yt.Threads=qt;class cl extends M{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class dl extends M{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class Gn extends M{create(e,t){return this._client.post("/files",Ut({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return fe(e)?this.list({},e):this._client.getAPIList("/files",Yn,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!n.has(i.status);)if(await $s(t),i=await this.retrieve(e),Date.now()-a>s)throw new $n({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return i}}class Yn extends Te{}Gn.FileObjectsPage=Yn;class Kn extends M{list(e,t={},s){return fe(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Xn,{query:t,...s})}}class Xn extends Te{}Kn.FineTuningJobCheckpointsPage=Xn;class Ht extends M{constructor(){super(...arguments),this.checkpoints=new Kn(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return fe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Qn,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return fe(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,ea,{query:t,...s})}}class Qn extends Te{}class ea extends Te{}Ht.FineTuningJobsPage=Qn;Ht.FineTuningJobEventsPage=ea;Ht.Checkpoints=Kn;Ht.FineTuningJobCheckpointsPage=Xn;class Fs extends M{constructor(){super(...arguments),this.jobs=new Ht(this._client)}}Fs.Jobs=Ht;Fs.FineTuningJobsPage=Qn;Fs.FineTuningJobEventsPage=ea;class ul extends M{createVariation(e,t){return this._client.post("/images/variations",Ut({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Ut({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class ta extends M{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",sa,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class sa extends fp{}ta.ModelsPage=sa;class hl extends M{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class fl extends M{create(e,t,s){return this._client.post(`/uploads/${e}/parts`,Ut({body:t,...s}))}}class ra extends M{constructor(){super(...arguments),this.parts=new fl(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(`/uploads/${e}/complete`,{body:t,...s})}}ra.Parts=fl;var ml;class O extends ep{constructor({baseURL:e=zs("OPENAI_BASE_URL"),apiKey:t=zs("OPENAI_API_KEY"),organization:s=zs("OPENAI_ORG_ID")??null,project:n=zs("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new C("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:s,project:n,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&up())throw new C(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new cl(this),this.chat=new Ln(this),this.embeddings=new dl(this),this.files=new Gn(this),this.images=new ul(this),this.audio=new Ls(this),this.moderations=new hl(this),this.models=new ta(this),this.fineTuning=new Fs(this),this.beta=new yt(this),this.batches=new Dn(this),this.uploads=new ra(this),this._options=i,this.apiKey=t,this.organization=s,this.project=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Dm(e,{arrayFormat:"brackets"})}}ml=O;O.OpenAI=ml;O.DEFAULT_TIMEOUT=6e5;O.OpenAIError=C;O.APIError=ne;O.APIConnectionError=Pr;O.APIConnectionTimeoutError=$n;O.APIUserAbortError=Se;O.NotFoundError=vo;O.ConflictError=wo;O.RateLimitError=xo;O.BadRequestError=go;O.AuthenticationError=yo;O.InternalServerError=jo;O.PermissionDeniedError=bo;O.UnprocessableEntityError=_o;O.toFile=To;O.fileFromPath=mo;O.Completions=cl;O.Chat=Ln;O.Embeddings=dl;O.Files=Gn;O.FileObjectsPage=Yn;O.Images=ul;O.Audio=Ls;O.Moderations=hl;O.Models=ta;O.ModelsPage=sa;O.FineTuning=Fs;O.Beta=yt;O.Batches=Dn;O.BatchesPage=Mn;O.Uploads=ra;const Tt={GPT_4:"gpt-4",GPT_4_TURBO:"gpt-4-turbo-preview",GPT_3_5_TURBO:"gpt-3.5-turbo",GPT_4O_MINI:"gpt-4o-mini"},Np={[Tt.GPT_4]:{maxTokens:4e3,temperature:.7,presencePenalty:.1,frequencyPenalty:.1},[Tt.GPT_4_TURBO]:{maxTokens:4e3,temperature:.7,presencePenalty:.1,frequencyPenalty:.1},[Tt.GPT_3_5_TURBO]:{maxTokens:2e3,temperature:.7,presencePenalty:0,frequencyPenalty:0},[Tt.GPT_4O_MINI]:{maxTokens:4e3,temperature:.7,presencePenalty:.1,frequencyPenalty:.1}},Ep={CV_ANALYSIS:`You are an expert HR professional and technical recruiter with deep experience in talent assessment.
Your task is to provide a comprehensive analysis of a candidate's CV against a job description.

Analyze for:
1. Technical Skills Match
2. Experience Alignment
3. Cultural Fit Indicators
4. Growth Potential
5. Risk Factors

Format your response exactly as follows:

FIT_SCORE: [1-10]
VERDICT: [GOOD_FIT|NEEDS_CONSIDERATION|BAD_FIT]

REASONING:
- [Key point 1]
- [Key point 2]
...

TECHNICAL_SKILLS:
- [Skill]: [Detailed assessment]
...

RISK_FACTORS:
- [Risk 1]
- [Risk 2]
...

GROWTH_POTENTIAL:
Areas:
- [Area 1]
- [Area 2]
...
Recommendations:
- [Recommendation 1]
- [Recommendation 2]
...

INTERVIEW_PLAN:
[Section Name] ([Duration] minutes):
Q: [Question]
Follow-up: [Follow-up question]
Red Flags: [What to watch out for]
Green Flags: [Positive indicators]
...`},Ap="your-production-openai-key",Tp=new O({apiKey:Ap,dangerouslyAllowBrowser:!0});async function Cp(r,e,t="gpt-4o-mini"){if(!r?.trim())throw new V("CV text is required",400);if(!e?.trim())throw new V("Job description is required",400);if(!Object.values(Tt).includes(t))throw new V(`Invalid model. Must be one of: ${Object.values(Tt).join(", ")}`,400);try{const s=Np[t];if(r.length+e.length>s.maxTokens*4)throw new V("Input text is too long for the selected model",400);const a=await Tp.chat.completions.create({model:t,messages:[{role:"system",content:Ep.CV_ANALYSIS},{role:"user",content:`CV:
${r}

Job Description:
${e}`}],temperature:s.temperature,presence_penalty:s.presencePenalty,frequency_penalty:s.frequencyPenalty,max_tokens:s.maxTokens});if(!a?.choices?.length)throw new V("Invalid response from OpenAI",500);const i=a.choices[0]?.message?.content;if(!i)throw new V("Empty response from OpenAI",500);return i}catch(s){if(s instanceof V)throw s;if(s instanceof O.APIError)switch(s.status){case 400:throw new V("Invalid request to OpenAI API: "+s.message,400);case 401:throw new V("Invalid OpenAI API key",401);case 429:throw new V("OpenAI API rate limit exceeded. Please try again later.",429);case 500:throw new V("OpenAI service error. Please try again later.",500);default:throw new V("OpenAI API error: "+s.message,s.status||500)}throw s instanceof Error?new V("Failed to communicate with OpenAI: "+s.message,500):new V("An unexpected error occurred during analysis",500)}}function Pp(r){const e=r.match(/FIT_SCORE:\s*(\d+)/i),t=r.match(/VERDICT:\s*(GOOD_FIT|NEEDS_CONSIDERATION|BAD_FIT)/i),s=r.match(/REASONING:([\s\S]*?)(?=TECHNICAL_SKILLS:)/i),n=r.match(/TECHNICAL_SKILLS:([\s\S]*?)(?=RISK_FACTORS:)/i),a=r.match(/RISK_FACTORS:([\s\S]*?)(?=GROWTH_POTENTIAL:)/i),i=r.match(/GROWTH_POTENTIAL:([\s\S]*?)(?=INTERVIEW_PLAN:)/i),l=r.match(/INTERVIEW_PLAN:([\s\S]*$)/i);if(!e||!t||!s||!l)throw new Error("Invalid response format from OpenAI");const c=h=>h.split(`
`).map(f=>f.trim()).filter(f=>f.startsWith("-")).map(f=>f.slice(1).trim()),d=h=>{const f=h.match(/Areas:([\s\S]*?)(?=Recommendations:)/i)?.[1]||"",m=h.match(/Recommendations:([\s\S]*$)/i)?.[1]||"";return{areas:c(f),recommendations:c(m)}},u=h=>h.split(`
`).map(f=>f.trim()).filter(f=>f.startsWith("-")).map(f=>{const[m,b]=f.slice(1).split(":").map(y=>y.trim());return{name:m,proficiency:Op(b),assessment:b}});return{fit_score:parseInt(e[1],10),verdict:t[1],reasoning:c(s[1]),technical_skills:u(n?.[1]||""),risk_factors:c(a?.[1]||""),growth_potential:d(i?.[1]||""),interview_plan:l[1].trim(),cv_summary:"",job_requirements:"",questions_used:[],suggestions:[],status:"pending"}}function Op(r){const e={expert:90,advanced:80,strong:75,good:70,intermediate:60,basic:40,limited:30,beginner:20},t=r.toLowerCase();for(const[s,n]of Object.entries(e))if(t.includes(s))return n;return 50}const na={FREE:4,PRO:1e3},Xa={WARNING:.8,CRITICAL:.95};function Rp(r,e){const t=performance.now();return r().finally(()=>{const s=performance.now()-t;hs.trackEvent("performance_measure",{operation:e,duration_ms:Math.round(s)})})}async function Ip({candidateId:r,jobId:e}){return Rp(async()=>{try{const[t,s]=await Promise.all([B.from("candidates").select("*").eq("id",r).single(),B.from("jobs").select("*").eq("id",e).single()]);if(t.error)throw new Error("Candidate not found");if(s.error)throw new Error("Job not found");const n=await Cp(t.data.cv_text,s.data.jd_text),a=Pp(n),{data:i,error:l}=await B.from("analysis").insert([{candidate_id:r,job_id:e,...a,created_at:new Date().toISOString()}]).select().single();if(l)throw l;return i}catch(t){throw Rn(t)}},"analyze_candidate_job")}async function $p(r){const{data:e,error:t}=await B.from("analysis").select("*").eq("id",r).single();if(t)throw new V("Analysis not found",404);return e}async function Lp(){const{data:r,error:e}=await B.from("analysis").select("*").order("created_at",{ascending:!1});if(e)throw new V("Failed to fetch analyses",500);return r||[]}async function pl(r){if(!r)throw new Error("User ID is required");try{const{data:e,error:t}=await B.from("subscriptions").select("status, plan, analysis_count, current_period_end").eq("user_id",r).maybeSingle();if(t)throw console.error("Supabase error:",t),new Error(`Database error: ${t.message}`);return e?{status:e.status||"active",plan:e.plan||"free",analysisCount:e.analysis_count||0,currentPeriodEnd:e.current_period_end||new Date(Date.now()+30*24*60*60*1e3).toISOString()}:{status:"active",plan:"free",analysisCount:0,currentPeriodEnd:new Date(Date.now()+30*24*60*60*1e3).toISOString()}}catch(e){return console.error("Subscription error:",e),{status:"active",plan:"free",analysisCount:0,currentPeriodEnd:new Date(Date.now()+30*24*60*60*1e3).toISOString()}}}async function gl(r){try{const e=r.plan.toUpperCase(),t=na[e];return Math.max(0,t-(r.analysisCount||0))}catch(e){return console.error("Error calculating remaining analyses:",e),0}}function yl(r){try{if(!r||r.status!=="active")return!1;const e=r.plan.toUpperCase(),t=na[e];return(r.analysisCount||0)<t}catch(e){return console.error("Error checking analysis permission:",e),!1}}var bl="https://js.stripe.com/v3",Dp=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Qa="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Mp=function(){for(var e=document.querySelectorAll('script[src^="'.concat(bl,'"]')),t=0;t<e.length;t++){var s=e[t];if(Dp.test(s.src))return s}return null},ei=function(e){var t="",s=document.createElement("script");s.src="".concat(bl).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(s),s},Fp=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})},Kt=null,Ys=null,Ks=null,Up=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Bp=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Wp=function(e){return Kt!==null?Kt:(Kt=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(Qa),window.Stripe){t(window.Stripe);return}try{var n=Mp();if(n&&e)console.warn(Qa);else if(!n)n=ei(e);else if(n&&Ks!==null&&Ys!==null){var a;n.removeEventListener("load",Ks),n.removeEventListener("error",Ys),(a=n.parentNode)===null||a===void 0||a.removeChild(n),n=ei(e)}Ks=Bp(t,s),Ys=Up(s),n.addEventListener("load",Ks),n.addEventListener("error",Ys)}catch(i){s(i);return}}),Kt.catch(function(t){return Kt=null,Promise.reject(t)}))},qp=function(e,t,s){if(e===null)return null;var n=e.apply(void 0,t);return Fp(n,s),n},Xt,vl=!1,wl=function(){return Xt||(Xt=Wp(null).catch(function(e){return Xt=null,Promise.reject(e)}),Xt)};Promise.resolve().then(function(){return wl()}).catch(function(r){vl||console.warn(r)});var aa=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];vl=!0;var n=Date.now();return wl().then(function(a){return qp(a,t,n)})};const Vp="your-production-stripe-key";aa(Vp);function Hp(){const[r,e]=p.useState(null),[t,s]=p.useState(null),{isLoading:n,withLoading:a}=Em(),{addToast:i}=no(),l=async c=>{try{const{data:{session:d}}=await B.auth.getSession();if(!d?.user)throw new V("Not authenticated",401);console.log("Auth check:",{userId:d.user.id,isAuthenticated:!0});const u=await Uu({name:c.candidateName,cv_text:c.cvText,created_at:new Date().toISOString()}),h=await cf(c.jobTitle,c.jobDescription);console.log("Starting analysis with:",{candidateId:u.id,jobId:h.id});const f=await Ip({candidateId:u.id,jobId:h.id});return console.log("Analysis completed:",f),e(f),s(null),i("Analysis completed successfully","success"),f}catch(d){console.error("Analysis error:",{error:d,type:d instanceof V?"ApiError":typeof d,message:d.message,status:d.status,details:d.details});const u=d instanceof V?d.message:"An unexpected error occurred. Please try again.";throw s(u),i(u,"error"),d}};return{analysis:r,error:t,isLoading:n,analyze:c=>a(l(c))}}K.string().email("Invalid email address");K.string().min(8,"Password must be at least 8 characters");const ti=K.object({name:K.string().min(1,"Name is required"),cv_text:K.string().min(100,"CV text must be at least 100 characters")}),si=K.object({title:K.string().min(1,"Job title is required"),jd_text:K.string().min(100,"Job description must be at least 100 characters")});K.object({cvText:K.string().min(100,"CV text must be at least 100 characters"),jobDescription:K.string().min(100,"Job description must be at least 100 characters")});K.object({plan:K.enum(["free","pro"]),status:K.enum(["active","trialing","past_due","canceled"]),analysisCount:K.number().min(0)});const zp=K.object({candidateName:ti.shape.name,cvText:ti.shape.cv_text,jobTitle:si.shape.title,jobDescription:si.shape.jd_text}),Zp={candidateName:"",cvText:"",jobTitle:"",jobDescription:""};function Jp(){const{analyze:r,analysis:e,isLoading:t}=Hp();return{...Nm({initialValues:Zp,validationSchema:zp,onSubmit:async n=>{await r({candidateName:n.candidateName,cvText:n.cvText,jobTitle:n.jobTitle,jobDescription:n.jobDescription})}}),analysis:e,isLoading:t}}function _l(){const[r,e]=p.useState(null),[t,s]=p.useState(!0);return p.useEffect(()=>{B.auth.getSession().then(({data:{session:i}})=>{e(i),s(!1)});const{data:{subscription:a}}=B.auth.onAuthStateChange((i,l)=>{e(l),l&&hs.trackEvent("user_signed_in")});return()=>a.unsubscribe()},[]),{session:r,loading:t,signOut:async()=>{try{const{error:a}=await B.auth.signOut();if(a)throw a;hs.trackEvent("user_signed_out")}catch(a){Rn(a)}}}}function Gp(){const{session:r}=_l(),[e,t]=p.useState(null),[s,n]=p.useState(!0),[a,i]=p.useState(null);return p.useEffect(()=>{let l=!0;async function c(){if(!r?.user){l&&(t(null),n(!1));return}try{await new Promise(u=>setTimeout(u,100));const d=await pl(r.user.id);l&&(t(d),i(null))}catch(d){console.error("Subscription fetch error:",d),l&&(i(d instanceof Error?d:new Error("Failed to fetch subscription")),t({status:"active",plan:"free",analysisCount:0,currentPeriodEnd:new Date(Date.now()+30*24*60*60*1e3).toISOString()}))}finally{l&&n(!1)}}return c(),()=>{l=!1}},[r]),{subscription:e,loading:s,error:a,canAnalyze:e?yl(e):!1,remainingAnalyses:e?gl(e):0}}function Yp(){const{session:r}=_l(),[e,t]=p.useState(null),[s,n]=p.useState(!0),[a,i]=p.useState(null);return p.useEffect(()=>{async function l(){if(!r?.user){t(null),n(!1);return}try{const c=await pl(r.user.id);if(typeof c=="object"&&c!==null)t(c),i(null);else throw new Error("Invalid subscription response format")}catch(c){const d=c instanceof Error?c.message:"Failed to fetch subscription";i(new Error(d)),console.error("Error fetching subscription:",c),t(null)}finally{n(!1)}}l()},[r]),{subscription:e,loading:s,error:a,canAnalyze:e?yl(e):!1,remainingAnalyses:e?gl(e):0}}function Kp(r){const e=na[r.plan.toUpperCase()],t=r.analysisCount,s=Math.max(0,e-t),n=t/e*100;return{limit:e,used:t,remaining:s,usagePercentage:n,isWarning:n>=Xa.WARNING*100,isCritical:n>=Xa.CRITICAL*100}}function Xp(){const{subscription:r}=Yp();if(!r)return null;const e=Kp(r),t=e.isCritical?"bg-red-600":e.isWarning?"bg-yellow-500":"bg-green-600";return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-600",children:[e.used," / ",e.limit," analyses used"]}),o.jsxs("span",{className:"text-gray-600",children:[e.remaining," remaining"]})]}),o.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${t} transition-all duration-500`,style:{width:`${Math.min(100,e.usagePercentage)}%`}})}),(e.isWarning||e.isCritical)&&o.jsx("p",{className:`text-sm ${e.isCritical?"text-red-600":"text-yellow-600"}`,children:e.isCritical?"You're almost out of analyses. Upgrade to continue analyzing.":"You're approaching your analysis limit. Consider upgrading soon."})]})}function Qp(){const{values:r,errors:e,setFieldValue:t,handleSubmit:s,analysis:n,isLoading:a}=Jp(),{canAnalyze:i}=Gp();return i?o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"New Analysis"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload a CV and job description to get started"})]}),o.jsx(Xp,{})]}),o.jsxs("form",{onSubmit:s,className:"space-y-8",children:[o.jsx(lf,{candidateName:r.candidateName,cvText:r.cvText,onNameChange:l=>t("candidateName",l),onCvTextChange:l=>t("cvText",l),errors:{name:e.candidateName,cvText:e.cvText}}),o.jsx(hf,{jobTitle:r.jobTitle,jobDescription:r.jobDescription,onTitleChange:l=>t("jobTitle",l),onDescriptionChange:l=>t("jobDescription",l),errors:{title:e.jobTitle,description:e.jobDescription}}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(dt,{type:"button",variant:"secondary",onClick:()=>{t("candidateName",""),t("cvText",""),t("jobTitle",""),t("jobDescription","")},disabled:a,children:"Clear Form"}),o.jsx(dt,{type:"submit",isLoading:a,children:"Analyze CV"})]})]}),n&&o.jsx("div",{className:"mt-8",children:o.jsx(Zi,{analysis:n})})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upgrade Your Plan"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"You've reached the limit of your free analyses. Upgrade to Pro for unlimited analyses."}),o.jsx(te,{to:"/pricing",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"View Pricing Plans"})]})}function xl(){const{data:r,isLoading:e,error:t,refetch:s}=Os(Lp);return{analyses:r||[],isLoading:e,error:t,refetch:s}}function eg({analysis:r,onClick:e}){const t=s=>s>=8?"bg-green-100 text-green-800":s>=6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return o.jsx("div",{onClick:e,className:`p-4 border rounded-lg ${e?"hover:bg-gray-50 cursor-pointer":""} transition-colors`,children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Candidate Analysis"}),o.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]}),o.jsxs("div",{className:`px-2 py-1 rounded text-sm ${t(r.fit_score)}`,children:["Score: ",r.fit_score,"/10"]})]})})}function tg(r){const[e,t]=p.useState(!1),{data:s,isLoading:n,error:a,refetch:i}=Os(()=>$p(r),{enabled:!!r});return{analysis:s,isLoading:n,error:a,refetch:i,isExpanded:e,toggleExpanded:()=>t(l=>!l)}}function sg({analysisId:r,onClose:e}){const{analysis:t,isLoading:s,error:n}=tg(r);return s?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(qe,{size:"lg"})}):n||!t?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-red-600 mb-4",children:n||"Analysis not found"}),o.jsx(dt,{variant:"secondary",onClick:e,children:"Go Back"})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Analysis Details"}),o.jsx(dt,{variant:"secondary",onClick:e,children:"Close"})]}),o.jsx(Zi,{analysis:t})]})}function ri({title:r,description:e,action:t}){return o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"rounded-full bg-blue-100 p-3 mx-auto w-12 h-12 flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),o.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:r}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:e}),t&&o.jsx("div",{className:"mt-6",children:t})]})}function rg(){const{analyses:r,isLoading:e,error:t}=xl(),[s,n]=p.useState(null);return e?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(qe,{size:"lg"})}):t?o.jsx(ri,{title:"Error loading analyses",description:t}):r.length?s?o.jsx(sg,{analysisId:s,onClose:()=>n(null)}):o.jsx("div",{className:"space-y-4",children:r.map(a=>o.jsx(eg,{analysis:a,onClick:()=>n(a.id??null)},a.id))}):o.jsx(ri,{title:"No analyses yet",description:"Start by analyzing a candidate's CV against a job description."})}function ng(){const{candidates:r,isLoading:e}=Mi();return e?o.jsx(qe,{}):o.jsxs("div",{className:"space-y-4",children:[r.map(t=>o.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Hi(t.created_at)}),o.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:t.cv_text})]},t.id)),!r.length&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No previous candidates found"})]})}function ag(){const{jobs:r,isLoading:e}=zi();return e?o.jsx(qe,{}):o.jsxs("div",{className:"space-y-4",children:[r.map(t=>o.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:t.title}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Hi(t.created_at)}),o.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:t.jd_text})]},t.id)),!r.length&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No previous jobs found"})]})}function ig({tabs:r,activeTab:e,onChange:t}){return o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:r.map(s=>o.jsx("button",{onClick:()=>t(s.id),"data-tab":s.id,className:`
              py-4 px-1 border-b-2 font-medium text-sm cursor-pointer
              ${e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:s.label},s.id))})})}async function og(){try{const r=new Date;r.setDate(r.getDate()-7);const[{count:e},{count:t},{count:s},{count:n}]=await Promise.all([B.from("analysis").select("*",{count:"exact",head:!0}),B.from("candidates").select("*",{count:"exact",head:!0}),B.from("jobs").select("*",{count:"exact",head:!0}),B.from("analysis").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString())]);return{totalAnalyses:e||0,totalCandidates:t||0,totalJobs:s||0,recentAnalyses:n||0}}catch{throw new V("Failed to fetch dashboard stats",500)}}function lg(){const{data:r,isLoading:e,error:t,refetch:s}=Os(og);return{stats:r||{totalAnalyses:0,totalCandidates:0,totalJobs:0,recentAnalyses:0},isLoading:e,error:t,refetch:s}}function cg(){const{stats:r,isLoading:e}=lg();if(e)return o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(qe,{})});const t=[{label:"Total Analyses",value:r.totalAnalyses,icon:di,color:"bg-gradient-to-br from-blue-500 to-blue-600",textColor:"text-blue-600"},{label:"Candidates",value:r.totalCandidates,icon:_r,color:"bg-gradient-to-br from-green-500 to-green-600",textColor:"text-green-600"},{label:"Jobs",value:r.totalJobs,icon:Hl,color:"bg-gradient-to-br from-purple-500 to-purple-600",textColor:"text-purple-600"},{label:"Recent Analyses",value:r.recentAnalyses,icon:ui,color:"bg-gradient-to-br from-orange-500 to-orange-600",textColor:"text-orange-600"}];return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map(s=>o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 opacity-5 bg-[radial-gradient(circle_at_1px_1px,#000_1px,transparent_0)] bg-[length:24px_24px]"}),o.jsxs("div",{className:"relative p-6",children:[o.jsx("div",{className:`${s.color} w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg mb-6 group-hover:scale-110 transition-transform duration-300`,children:o.jsx(s.icon,{className:"h-7 w-7 text-white"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:`text-4xl font-bold ${s.textColor} tracking-tight transition-colors duration-300`,children:s.value.toLocaleString()}),o.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.label})]}),o.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 -mr-10 -mt-10 ${s.color} opacity-10 rounded-full transform rotate-45`})]})]},s.label))})}function dg({user:r}){const e=r?.email?.split("@")[0],t=r?.email;return r?o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome! ",e,"!"]}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Here's what's happening with your recruitment analysis"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-500 transition-colors duration-200","aria-label":"Notifications",children:[o.jsx(ql,{className:"h-6 w-6"}),o.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"})]}),o.jsxs("div",{className:"flex items-center",children:[r.user_metadata?.avatar_url?o.jsx("img",{src:r.user_metadata.avatar_url,alt:"Profile",className:"h-8 w-8 rounded-full"}):o.jsx(hi,{className:"h-8 w-8 text-gray-400"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:t}),o.jsx("p",{className:"text-xs text-gray-500",children:"Profile"})]})]})]})]})}):null}function ug(){const{analyses:r,isLoading:e}=xl(),t=r.slice(0,5);return o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),e?o.jsx("div",{className:"flex justify-center py-4",children:o.jsx(qe,{})}):o.jsx("div",{className:"h-48 overflow-y-auto pr-2",children:o.jsx("div",{className:"space-y-4",children:t.map(s=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-blue-600",children:s.fit_score})})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"New analysis completed"}),o.jsx("p",{className:"text-sm text-gray-500",children:nf(s.created_at)})]})]},s.id))})})]})}const hg=[{id:"new",label:"New Analysis"},{id:"history",label:"Analysis History"},{id:"candidates",label:"Previous Candidates"},{id:"jobs",label:"Previous Jobs"}];function fg(){const[r,e]=p.useState("new"),{session:t}=Tr();return o.jsxs("div",{className:"space-y-6",children:[o.jsx(dg,{user:t?.user}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(cg,{})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsx(ug,{})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow",children:o.jsxs("div",{className:"p-6",children:[o.jsx(ig,{tabs:hg,activeTab:r,onChange:e}),o.jsxs("div",{className:"mt-6",children:[r==="new"&&o.jsx(Qp,{}),r==="history"&&o.jsx(rg,{}),r==="candidates"&&o.jsx(ng,{}),r==="jobs"&&o.jsx(ag,{})]})]})})]})}class mg extends p.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?this.props.fallback||o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),o.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),o.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try again"})]})}):this.props.children}}function pg(){return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(Fu,{}),o.jsx("main",{className:"py-8",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx(mg,{children:o.jsx(ii,{children:o.jsx(st,{path:"/",element:o.jsx(fg,{})})})})})})]})}const gg="your-production-stripe-key",yg=aa(gg),bg={PRICES:{PRO:"price_mock_monthly_pro_plan"},MAX_FREE_ANALYSES:4};function ni({plan:r}){const[e,t]=p.useState(!1),{session:s}=Tr(),{addToast:n}=no(),a=ai(),i=async()=>{if(!s){a("/login");return}if(r==="free"){a("/dashboard");return}t(!0);try{const l=await yg;if(!l)throw new Error("Stripe not initialized");const{error:c}=await l.redirectToCheckout({lineItems:[{price:bg.PRICES.PRO,quantity:1}],mode:"subscription",successUrl:`${window.location.origin}/dashboard`,cancelUrl:`${window.location.origin}/pricing`});if(c)throw c}catch(l){n("Failed to start subscription process","error"),console.error("Subscription error:",l)}finally{t(!1)}};return o.jsx(dt,{onClick:i,isLoading:e,variant:r==="pro"?"primary":"secondary",className:"w-full",children:r==="free"?"Start Free Trial":"Subscribe Now"})}const vg="your-production-stripe-key";aa(vg);const wg=4;function _g(){return o.jsxs("div",{className:"relative bg-white py-24 overflow-hidden border border-blue-500/20 rounded-lg",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-[0.02]"}),o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full blur-3xl opacity-30 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("p",{className:"inline-flex items-center px-4 py-1.5 rounded-full border border-blue-400/30 bg-blue-500/10 backdrop-blur-sm text-blue-600 text-sm font-medium mb-4",children:"Flexible Plans"}),o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Choose the plan that's right for your recruitment needs"})]}),o.jsxs("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-1",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-blue-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:ye.FREE.name}),o.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Perfect for trying out our service"}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("span",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600",children:"$0"}),o.jsx("span",{className:"text-gray-600",children:"/month"}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Up to ",wg," CV analyses"]})]}),o.jsx("ul",{className:"space-y-4 mb-8",children:ye.FREE.features.map((r,e)=>o.jsxs("li",{className:"flex items-start group/item",children:[o.jsx(ar,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5 group-hover/item:scale-110 transition-transform"}),o.jsx("span",{className:"ml-3 text-gray-600",children:r})]},e))}),o.jsx(ni,{plan:"free"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl shadow-xl overflow-hidden transform hover:scale-[1.02] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),o.jsxs("div",{className:"relative p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-white text-center mb-2",children:ye.PRO.name}),o.jsx("p",{className:"text-center text-blue-100 mb-6",children:"For serious recruiters"}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("span",{className:"text-5xl font-bold text-white",children:["$",ye.PRO.price]}),o.jsx("span",{className:"text-blue-100",children:"/month"}),o.jsxs("p",{className:"text-sm text-blue-100 mt-2",children:[ye.PRO.analysisLimit," analyses per month"]})]}),o.jsx("ul",{className:"space-y-4 mb-8",children:ye.PRO.features.map((r,e)=>o.jsxs("li",{className:"flex items-start group/item",children:[o.jsx(ar,{className:"h-5 w-5 text-white flex-shrink-0 mt-0.5 group-hover/item:scale-110 transition-transform"}),o.jsx("span",{className:"ml-3 text-white",children:r})]},e))}),o.jsx(ni,{plan:"pro"})]})]})]})]})]})}function xg(){const{session:r,loading:e}=Tr();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx(qe,{size:"lg"})}):o.jsxs(ii,{children:[o.jsx(st,{path:"/",element:r?o.jsx(zt,{to:"/dashboard"}):o.jsx(Sc,{})}),o.jsx(st,{path:"/login",element:r?o.jsx(zt,{to:"/dashboard"}):o.jsx($u,{})}),o.jsx(st,{path:"/signup",element:r?o.jsx(zt,{to:"/dashboard"}):o.jsx(Du,{})}),o.jsx(st,{path:"/pricing",element:o.jsx(_g,{})}),o.jsx(st,{path:"/dashboard/*",element:r?o.jsx(pg,{}):o.jsx(zt,{to:"/login"})}),o.jsx(st,{path:"*",element:o.jsx(zt,{to:"/"})})]})}en.createRoot(document.getElementById("root")).render(o.jsx(Nl.StrictMode,{children:o.jsx(El,{children:o.jsx(xg,{})})}));
//# sourceMappingURL=index-sVoIoPo7.js.map
